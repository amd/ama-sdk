<!DOCTYPE html>
<html class="writer-html5" lang="English" >
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
<!-- OneTrust Cookies Consent Notice start for amd.github.io -->
<script src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js" data-document-language="true" type="text/javascript" charset="UTF-8" data-domain-script="cb638ba1-8bc4-44a0-9338-632d4dc19be6" ></script>
<script type="text/javascript">
function OptanonWrapper() { }
</script>
<!-- OneTrust Cookies Consent Notice end for amd.github.io -->
<!-- Google Tag Manager -->
<script type="text/plain" class="optanon-category-C0002">(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-5RHQV7');</script>
<!-- End Google Tag Manager -->
  <title>C API Programming Guide &mdash; AMD AMA 1.1.1 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/_static/custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="_static/jquery.js?v=5d32c60e"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="_static/documentation_options.js?v=63426ac4"></script>
        <script src="_static/doctools.js?v=888ff710"></script>
        <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Card Management" href="card_management.html" />
    <link rel="prev" title="Managing Video Acceleration Compute Resources" href="managing_compute_resources.html" /> 
</head>

<body class="wy-body-for-nav">

<!-- Google Tag Manager -->
<noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5RHQV7" height="0" width="0" style="display:none;visibility:hidden" class="optanon-category-C0002"></iframe></noscript>
<!-- End Google Tag Manager --> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
            <a href="index.html" class="icon icon-home"> AMD AMA
          </a>
              <div class="version">
                1.1.1
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Get Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="release_notes.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="getting_started_on_prem.html">On Premises</a></li>
<li class="toctree-l1"><a class="reference internal" href="virtualization.html">Virtualization</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples.html">Tutorials and Examples</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Reference Guides</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="specs_and_features.html">Specs and Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="package_feed.html">Package Feed Setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="using_ffmpeg.html">Using FFmpeg</a></li>
<li class="toctree-l1"><a class="reference internal" href="using_gstreamer.html">Using Gstreamer</a></li>
<li class="toctree-l1"><a class="reference internal" href="unified_logging.html">Unified Logging</a></li>
<li class="toctree-l1"><a class="reference internal" href="tuning_video_quality.html">Tuning Video Quality</a></li>
<li class="toctree-l1"><a class="reference internal" href="tuning_pipeline_latency.html">Tuning Latency of Transcode Pipeline</a></li>
<li class="toctree-l1"><a class="reference internal" href="managing_compute_resources.html">Managing Compute Resources</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">C API Programming Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="#general-application-development-guide">General Application Development Guide</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#resource-initialization-and-allocation">Resource Initialization and Allocation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#session-creation">Session Creation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#runtime-processing">Runtime Processing</a></li>
<li class="toctree-l3"><a class="reference internal" href="#cleanup">Cleanup</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#compiling-and-linking-with-the-sdk-plugins">Compiling and Linking with the AMD AMA Video SDK Plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="#common-xma-data-structures">Common XMA Data Structures</a></li>
<li class="toctree-l2"><a class="reference internal" href="#common-xma-data-reference">Common XMA Data Reference</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#xma-log-interface">XMA Log Interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="#xma-session-interface">XMA Session Interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="#xma-data-buffer-interface">XMA Data Buffer Interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="#xma-frame-interface">XMA Frame Interface</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#sdk-api">1.0 SDK API</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#decoder-plugin-reference">Decoder Plugin Reference</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#decoder-interface">Decoder Interface</a></li>
<li class="toctree-l4"><a class="reference internal" href="#decoder-properties">Decoder Properties</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#scaler-plugin-reference">Scaler Plugin Reference</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#scaler-interface">Scaler Interface</a></li>
<li class="toctree-l4"><a class="reference internal" href="#scaler-properties">Scaler Properties</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#encoder-plugin-reference">Encoder Plugin Reference</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#encoder-interface">Encoder Interface</a></li>
<li class="toctree-l4"><a class="reference internal" href="#encoder-properties">Encoder Properties</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#filter-plugin-reference">Filter Plugin Reference</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#filter-interface">Filter Interface</a></li>
<li class="toctree-l4"><a class="reference internal" href="#filter-properties">Filter Properties</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#ultra-low-latency-considerations">Ultra Low Latency Considerations</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#decoder-low-latency-mode">Decoder Low Latency Mode</a></li>
<li class="toctree-l4"><a class="reference internal" href="#encoder-ultra-low-latency-mode">Encoder Ultra Low Latency Mode</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id3">1.1 SDK API</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#sideband-data">Sideband Data</a></li>
<li class="toctree-l3"><a class="reference internal" href="#multithreading">Multithreading</a></li>
<li class="toctree-l3"><a class="reference internal" href="#logging">Logging</a></li>
<li class="toctree-l3"><a class="reference internal" href="#upgrading">Upgrading</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#xrm-api-reference">XRM API Reference</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#decoder-resource-reservation-with-xrm">Decoder Resource Reservation with XRM</a></li>
<li class="toctree-l3"><a class="reference internal" href="#encoder-resource-reservation-with-xrm">Encoder Resource Reservation with XRM</a></li>
<li class="toctree-l3"><a class="reference internal" href="#scaler-resource-reservation-with-xrm">Scaler Resource Reservation with XRM</a></li>
<li class="toctree-l3"><a class="reference internal" href="#building-sample-examples">Building Sample Examples</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="card_management.html">Card Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="migration.html">Migration Path</a></li>
<li class="toctree-l1"><a class="reference internal" href="encoder_comp_matrix.html">Encoding Compatibility Matrix</a></li>
<li class="toctree-l1"><a class="reference internal" href="preview.html">New Feature Preview</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Support</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="troubleshooting.html">Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference external" href="https://www.xilinx.com/support.html">File an issue</a></li>
<li class="toctree-l1"><a class="reference external" href="https://support.xilinx.com/s/topic/0TO2E000000YKY8WAO/video?language=en_US">Video Forum</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Other AMA SDK Versions</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://amd.github.io/ama-sdk/v1.0/index.html">v1.0</a></li>
<li class="toctree-l1"><a class="reference external" href="https://amd.github.io/ama-sdk/">Latest Version</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Other Video Products</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/video-sdk/v3.0/index.html">U30</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: black" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">AMD AMA</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li>C API Programming Guide</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="admonition attention">
<p class="admonition-title">Attention</p>
<p>This version of the SDK has been superseded by the <a class="reference external" href="https://amd.github.io/ama-sdk/latest/index.html">latest release</a> of the SDK.</p>
</div>
<section id="c-api-programming-guide">
<span id="id1"></span><h1>C API Programming Guide<a class="headerlink" href="#c-api-programming-guide" title="Link to this heading">¶</a></h1>
<nav class="contents local" id="table-of-contents">
<p class="topic-title">Table of Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#overview" id="id5">Overview</a></p></li>
<li><p><a class="reference internal" href="#general-application-development-guide" id="id6">General Application Development Guide</a></p>
<ul>
<li><p><a class="reference internal" href="#resource-initialization-and-allocation" id="id7">Resource Initialization and Allocation</a></p></li>
<li><p><a class="reference internal" href="#session-creation" id="id8">Session Creation</a></p></li>
<li><p><a class="reference internal" href="#runtime-processing" id="id9">Runtime Processing</a></p></li>
<li><p><a class="reference internal" href="#cleanup" id="id10">Cleanup</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#compiling-and-linking-with-the-sdk-plugins" id="id11">Compiling and Linking with the AMD AMA Video SDK Plugins</a></p></li>
<li><p><a class="reference internal" href="#common-xma-data-structures" id="id12">Common XMA Data Structures</a></p></li>
<li><p><a class="reference internal" href="#common-xma-data-reference" id="id13">Common XMA Data Reference</a></p>
<ul>
<li><p><a class="reference internal" href="#xma-log-interface" id="id14">XMA Log Interface</a></p></li>
<li><p><a class="reference internal" href="#xma-session-interface" id="id15">XMA Session Interface</a></p></li>
<li><p><a class="reference internal" href="#xma-data-buffer-interface" id="id16">XMA Data Buffer Interface</a></p></li>
<li><p><a class="reference internal" href="#xma-frame-interface" id="id17">XMA Frame Interface</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#sdk-api" id="id18">1.0 SDK API</a></p>
<ul>
<li><p><a class="reference internal" href="#decoder-plugin-reference" id="id19">Decoder Plugin Reference</a></p></li>
<li><p><a class="reference internal" href="#scaler-plugin-reference" id="id20">Scaler Plugin Reference</a></p></li>
<li><p><a class="reference internal" href="#encoder-plugin-reference" id="id21">Encoder Plugin Reference</a></p></li>
<li><p><a class="reference internal" href="#filter-plugin-reference" id="id22">Filter Plugin Reference</a></p></li>
<li><p><a class="reference internal" href="#ultra-low-latency-considerations" id="id23">Ultra Low Latency Considerations</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#id3" id="id24">1.1 SDK API</a></p>
<ul>
<li><p><a class="reference internal" href="#sideband-data" id="id25">Sideband Data</a></p></li>
<li><p><a class="reference internal" href="#multithreading" id="id26">Multithreading</a></p></li>
<li><p><a class="reference internal" href="#logging" id="id27">Logging</a></p></li>
<li><p><a class="reference internal" href="#upgrading" id="id28">Upgrading</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#xrm-api-reference" id="id29">XRM API Reference</a></p>
<ul>
<li><p><a class="reference internal" href="#decoder-resource-reservation-with-xrm" id="id30">Decoder Resource Reservation with XRM</a></p></li>
<li><p><a class="reference internal" href="#encoder-resource-reservation-with-xrm" id="id31">Encoder Resource Reservation with XRM</a></p></li>
<li><p><a class="reference internal" href="#scaler-resource-reservation-with-xrm" id="id32">Scaler Resource Reservation with XRM</a></p></li>
<li><p><a class="reference internal" href="#building-sample-examples" id="id33">Building Sample Examples</a></p></li>
</ul>
</li>
</ul>
</nav>
<section id="overview">
<h2><a class="toc-backref" href="#id5" role="doc-backlink">Overview</a><a class="headerlink" href="#overview" title="Link to this heading">¶</a></h2>
<p>The AMD AMA Video SDK provides a C-based application programming interface (API) which facilitates the integration of AMD transcoding capabilities in proprietary frameworks. This API is provided in the form of plugins leveraging the Xilinx Media Accelerator (XMA) library and the Xilinx Resource Manager (XRM) library.</p>
<p class="rubric">The XMA Library</p>
<p>The XMA library (libxma) is meant to simplify the development of applications managing and controlling video accelerators such as decoders, scalers, filters, and encoders.</p>
<p class="rubric">The XRM Library</p>
<p>The XRM library is used to manage the hardware accelerators available in the system. XRM keeps track of total system capacity for each of the compute units such as the decoder, scaler, and encoder. The XRM library makes it possible to perform actions such as reserving, allocating and releasing resources; calculating resource load and max capacity.</p>
<p class="rubric">The AMD AMA Video SDK Plugins</p>
<p>The AMD AMA Video SDK provides 4 different plugins, each corresponding to a specific hardware accelerated feature of the card:</p>
<ul class="simple">
<li><p>The decoder plugin</p></li>
<li><p>The encoder plugin</p></li>
<li><p>The filter plugin</p></li>
<li><p>The scaler plugin</p></li>
</ul>
<p>Any combination of plugins can be used when integrating with a proprietary framework.</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
</section>
<section id="general-application-development-guide">
<h2><a class="toc-backref" href="#id6" role="doc-backlink">General Application Development Guide</a><a class="headerlink" href="#general-application-development-guide" title="Link to this heading">¶</a></h2>
<p>Integration layers for applications using the AMD AMA Video SDK are organized around the following steps:</p>
<ol class="arabic simple">
<li><p>Initialization</p></li>
<li><p>Resource Reservation</p></li>
<li><p>Session Creation</p></li>
<li><p>Runtime Processing</p></li>
<li><p>Cleanup</p></li>
</ol>
<section id="resource-initialization-and-allocation">
<h3><a class="toc-backref" href="#id7" role="doc-backlink">Resource Initialization and Allocation</a><a class="headerlink" href="#resource-initialization-and-allocation" title="Link to this heading">¶</a></h3>
<p>Applications using the plugins must first create a XRM plugin using the <code class="xref c c-func docutils literal notranslate"><span class="pre">xrm_PLUGIN_reserve()</span></code>, where PLUGIN is one of dec, enc, or scale. This is done using the XRM APIs, as described in detail in the <a class="reference internal" href="#xrm-api-reference"><span class="std std-ref">XRM API Reference Guide</span></a> below.</p>
</section>
<section id="session-creation">
<h3><a class="toc-backref" href="#id8" role="doc-backlink">Session Creation</a><a class="headerlink" href="#session-creation" title="Link to this heading">¶</a></h3>
<p>Once the resources have been allocated, the application must create dedicated plugin sessions for each of the hardware accelerators that need to be used (decoder, scaler, encoder, filter).</p>
<p>To create a session, the application must first initialize all the required properties and parameters of the particular plugin. It must then call the  corresponding session creation function. A complete reference for all the plugins is provided below.</p>
</section>
<section id="runtime-processing">
<h3><a class="toc-backref" href="#id9" role="doc-backlink">Runtime Processing</a><a class="headerlink" href="#runtime-processing" title="Link to this heading">¶</a></h3>
<p>The plugins provide functions to send data from the host and receive data from the device. The data is in the form of video frames (<a class="reference internal" href="#c.XmaFrame" title="XmaFrame"><code class="xref c c-struct docutils literal notranslate"><span class="pre">XmaFrame</span></code></a>). It is also possible to do zero-copy operations where frames are passed from one hardware accelerator to the next without being copied back to the host. The send and receive functions are specific to each plugin and the return code should be used to determine the next suitable action. A complete reference for all the plugins is provided below.</p>
</section>
<section id="cleanup">
<h3><a class="toc-backref" href="#id10" role="doc-backlink">Cleanup</a><a class="headerlink" href="#cleanup" title="Link to this heading">¶</a></h3>
<p>When the application finishes, it should destroy each plugin session using the corresponding destroy function. Doing so will free the resources on the AMD devices for other jobs and ensure that everything is released and cleaned-up properly.</p>
<p>The application should also use the <code class="xref c c-func docutils literal notranslate"><span class="pre">xrm_PLUGIN_release()</span></code>, where PLUGIN is one of dec, enc, or scale to release allocated resources. This is done using the XRM APIs, as described in detail in the <a class="reference internal" href="#xrm-api-reference"><span class="std std-ref">XRM API Reference Guide</span></a> below.</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
</section>
</section>
<section id="compiling-and-linking-with-the-sdk-plugins">
<h2><a class="toc-backref" href="#id11" role="doc-backlink">Compiling and Linking with the AMD AMA Video SDK Plugins</a><a class="headerlink" href="#compiling-and-linking-with-the-sdk-plugins" title="Link to this heading">¶</a></h2>
<p>The plugins can be dynamically linked to the application. The required package to build applications is XRM. This package is provided as part of the AMD AMA Video SDK.</p>
<p>To provide the necessary declarations in your application, include the following header in your source code:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">#include &lt;xrm.h&gt;</span>
</pre></div>
</div>
<p>To compile and link your application with the plugins, add the following lines to your CMakeList.txt file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>target_link_libraries (${PROJECT_NAME} PUBLIC xma PUBLIC xrm_interface)
target_include_directories (${PROJECT_NAME}
  PUBLIC &quot;${PROJECT_SOURCE_DIR}/include&quot;
  PUBLIC &quot;$&lt;TARGET_PROPERTY:xrm,INTERFACE_INCLUDE_DIRECTORIES&gt;&quot;)
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
</section>
<section id="common-xma-data-structures">
<h2><a class="toc-backref" href="#id12" role="doc-backlink">Common XMA Data Structures</a><a class="headerlink" href="#common-xma-data-structures" title="Link to this heading">¶</a></h2>
<dl class="c struct">
<dt class="sig sig-object c" id="c.XmaParameter">
<span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">XmaParameter</span></span></span><a class="headerlink" href="#c.XmaParameter" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p>Type-Length-Value data structure used for passing custom arguments to a plugin. The declaration of <a class="reference internal" href="#c.XmaParameter" title="XmaParameter"><code class="xref c c-struct docutils literal notranslate"><span class="pre">XmaParameter</span></code></a> can be found in the /opt/amd/ama/ma35/include/xma/xmaparam.h file.</p>
<dl class="c struct">
<dt class="sig sig-object c" id="c.XmaFrameProperties">
<span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">XmaFrameProperties</span></span></span><a class="headerlink" href="#c.XmaFrameProperties" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p>Data structure describing the frame dimensions for XmaFrame. The declaration of <a class="reference internal" href="#c.XmaFrameProperties" title="XmaFrameProperties"><code class="xref c c-struct docutils literal notranslate"><span class="pre">XmaFrameProperties</span></code></a> can be found in the /opt/amd/ama/ma35/include/xma/xmabuffers.h file.</p>
<dl class="c struct">
<dt class="sig sig-object c" id="c.XmaFrame">
<span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">XmaFrame</span></span></span><a class="headerlink" href="#c.XmaFrame" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p>Data structure describing a raw video frame and its buffers. <a class="reference internal" href="#c.XmaFrame" title="XmaFrame"><code class="xref c c-struct docutils literal notranslate"><span class="pre">XmaFrame</span></code></a> structures can be received from the decoder or sent to the encoder. They are also used as input and outputs for the scaler and the look-ahead. The declaration of <a class="reference internal" href="#c.XmaFrame" title="XmaFrame"><code class="xref c c-struct docutils literal notranslate"><span class="pre">XmaFrame</span></code></a> can be found in the /opt/amd/ama/ma35/include/xma/xmabuffers.h file.</p>
<p>The AMD AMA Video SDK plugins supports 3 types of frames:</p>
<ul class="simple">
<li><p><code class="xref c c-macro docutils literal notranslate"><span class="pre">XMA_HOST_BUFFER_TYPE</span></code> frames must be copied to the device using the upload filter before they can be used by the device..</p></li>
<li><p><code class="xref c c-macro docutils literal notranslate"><span class="pre">XMA_DEVICE_ONLY_BUFFER_TYPE</span></code> frames must be copied to the host using the download filter before they can be used by the host application.</p></li>
<li><p><code class="xref c c-macro docutils literal notranslate"><span class="pre">NO_BUFFER</span></code> frames do not contain buffer data and are used as place holders to be filled in by XMA plugins..</p></li>
</ul>
<p>The upload filter plugin send function only supports <code class="xref c c-macro docutils literal notranslate"><span class="pre">XMA_HOST_BUFFER_TYPE</span></code> frames, while all other send frame functions only support <code class="xref c c-macro docutils literal notranslate"><span class="pre">XMA_DEVICE_BUFFER_TYPE</span></code> frames. All frames used in receive functions must contain &quot;dummy&quot; data. All parameters in those frames will be filled in by the respective receive functions. All frames must be allocated using the provided XMA functions.</p>
<dl class="c struct">
<dt class="sig sig-object c" id="c.XmaDataBuffer">
<span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">XmaDataBuffer</span></span></span><a class="headerlink" href="#c.XmaDataBuffer" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p>Data structure describing a buffer containing encoded video data. <a class="reference internal" href="#c.XmaDataBuffer" title="XmaDataBuffer"><code class="xref c c-struct docutils literal notranslate"><span class="pre">XmaDataBuffer</span></code></a> structures can be sent to the decoder or received from the encoder. The declaration of <a class="reference internal" href="#c.XmaDataBuffer" title="XmaDataBuffer"><code class="xref c c-struct docutils literal notranslate"><span class="pre">XmaDataBuffer</span></code></a> can be found in the /opt/amd/ama/ma35/include/xma/xmabuffers.h file.</p>
<p>All <a class="reference internal" href="#c.XmaDataBuffer" title="XmaDataBuffer"><code class="xref c c-struct docutils literal notranslate"><span class="pre">XmaDataBuffer</span></code></a> structures must be allocated using one of the provided functions. <a class="reference internal" href="#c.XmaDataBuffer" title="XmaDataBuffer"><code class="xref c c-struct docutils literal notranslate"><span class="pre">XmaDataBuffer</span></code></a> structures used in the encoder receive function must be allocated with &quot;dummy&quot; data and will be filled in by the encoder.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><strong>Xma[Scaler|Encoder|Filter]Properties.sw_format</strong></p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">sw_format</span></code>, which is a member of <code class="docutils literal notranslate"><span class="pre">XmaScalerProperties</span></code>, <code class="docutils literal notranslate"><span class="pre">XmaEncoderProperties</span></code>, and <code class="docutils literal notranslate"><span class="pre">XmaFilterProperties</span></code> structures, represents the pixel format of a frame on the device. Therefore, its assigned value is determined by the direction of data flow. Specifically:</p>
<blockquote>
<div><div class="line-block">
<div class="line">XMA_NV12_FMT_TYPE and XMA_P010LE_FMT_TYPE, with <code class="docutils literal notranslate"><span class="pre">flags</span></code> = XMA_FRAME_PROPERTY_FLAG_TILE_4x4,  are internal formats that can only be generated by decoder/scaler and not by the upload filter.</div>
<div class="line">XMA_PACKED10_FMT_TYPE is an internal format that can only be generated by decoder/scaler and not the upload filter.</div>
<div class="line">XMA_RGB24_FMT_TYPE is reserved for future use.</div>
<div class="line">XMA_YUV420P_FMT_TYPE and XMA_YUV420P10LE_FMT_TYPE are external formats that can be used by the upload filter</div>
</div>
</div></blockquote>
</div></blockquote>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
</section>
<section id="common-xma-data-reference">
<h2><a class="toc-backref" href="#id13" role="doc-backlink">Common XMA Data Reference</a><a class="headerlink" href="#common-xma-data-reference" title="Link to this heading">¶</a></h2>
<p>This section describes the commonly used calls and APIs that are required in most applications.</p>
<section id="xma-log-interface">
<h3><a class="toc-backref" href="#id14" role="doc-backlink">XMA Log Interface</a><a class="headerlink" href="#xma-log-interface" title="Link to this heading">¶</a></h3>
<p>The external interface to the xma logging consists of the following XMA functions:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#c.xma_log_init" title="xma_log_init"><code class="xref c c-func docutils literal notranslate"><span class="pre">xma_log_init()</span></code></a></p></li>
<li><p><a class="reference internal" href="#c.xma_logmsg" title="xma_logmsg"><code class="xref c c-func docutils literal notranslate"><span class="pre">xma_logmsg()</span></code></a></p></li>
<li><p><a class="reference internal" href="#c.xma_log_release" title="xma_log_release"><code class="xref c c-func docutils literal notranslate"><span class="pre">xma_log_release()</span></code></a></p></li>
</ul>
<p>The declaration of these functions can be found in the /opt/amd/ama/ma35/include/xma/xmalogger.h file.</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.xma_log_init">
<span class="n"><span class="pre">int32_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">xma_log_init</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">XmaLogLevelType</span></span><span class="w"> </span><span class="n"><span class="pre">log_level</span></span>, <span class="n"><span class="pre">XmaLogType</span></span><span class="w"> </span><span class="n"><span class="pre">log_type</span></span>, <span class="n"><span class="pre">XmaLogHandle</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">handle</span></span>, <span class="p"><span class="pre">...</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.xma_log_init" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p>This function creates a log session and must be called prior to logging. (See /opt/amd/ama/ma35/include/xma/xmalogger.h for details on variadic usage.)</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.xma_logmsg">
<span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">xma_logmsg</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">XmaLogHandle</span></span><span class="w"> </span><span class="n"><span class="pre">handle</span></span>, <span class="n"><span class="pre">XmaLogLevelType</span></span><span class="w"> </span><span class="n"><span class="pre">level</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">name</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">msg</span></span>, <span class="p"><span class="pre">...</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.xma_logmsg" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p>This function logs a message.</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.xma_log_release">
<span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">xma_log_release</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">XmaLogHandle</span></span><span class="w"> </span><span class="n"><span class="pre">handle</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.xma_log_release" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p>This function releases a log session that was previously created with the <a class="reference internal" href="#c.xma_log_init" title="xma_log_init"><code class="xref c c-func docutils literal notranslate"><span class="pre">xma_log_init()</span></code></a> function.</p>
</section>
<section id="xma-session-interface">
<h3><a class="toc-backref" href="#id15" role="doc-backlink">XMA Session Interface</a><a class="headerlink" href="#xma-session-interface" title="Link to this heading">¶</a></h3>
<p>The external interface to the xma session consists of the following XMA functions:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#c.xma_initialize" title="xma_initialize"><code class="xref c c-func docutils literal notranslate"><span class="pre">xma_initialize()</span></code></a></p></li>
<li><p><a class="reference internal" href="#c.xma_release" title="xma_release"><code class="xref c c-func docutils literal notranslate"><span class="pre">xma_release()</span></code></a></p></li>
</ul>
<p>The declaration of these functions can be found in the /opt/amd/ama/ma35/include/xma/xma.h file.</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.xma_initialize">
<span class="n"><span class="pre">int32_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">xma_initialize</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">XmaLogHandle</span></span><span class="w"> </span><span class="n"><span class="pre">log</span></span>, <span class="n"><span class="pre">XmaInitParameter</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">init_params</span></span>, <span class="n"><span class="pre">XmaHandle</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">handle</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.xma_initialize" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p>This function creates a XMA session and must be called prior to creating any plugins.</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.xma_release">
<span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">xma_release</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">XmaHandle</span></span><span class="w"> </span><span class="n"><span class="pre">handle</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.xma_release" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p>This function releases a XMA session that was previously created with the <a class="reference internal" href="#c.xma_initialize" title="xma_initialize"><code class="xref c c-func docutils literal notranslate"><span class="pre">xma_initialize()</span></code></a> function.</p>
</section>
<section id="xma-data-buffer-interface">
<h3><a class="toc-backref" href="#id16" role="doc-backlink">XMA Data Buffer Interface</a><a class="headerlink" href="#xma-data-buffer-interface" title="Link to this heading">¶</a></h3>
<p>The external interface to the xma data buffer consists of the following XMA functions:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#c.xma_data_buffer_alloc" title="xma_data_buffer_alloc"><code class="xref c c-func docutils literal notranslate"><span class="pre">xma_data_buffer_alloc()</span></code></a></p></li>
<li><p><a class="reference internal" href="#c.xma_data_from_buffer_clone" title="xma_data_from_buffer_clone"><code class="xref c c-func docutils literal notranslate"><span class="pre">xma_data_from_buffer_clone()</span></code></a></p></li>
<li><p><a class="reference internal" href="#c.xma_data_buffer_free" title="xma_data_buffer_free"><code class="xref c c-func docutils literal notranslate"><span class="pre">xma_data_buffer_free()</span></code></a></p></li>
</ul>
<p>The declaration of these functions can be found in the /opt/amd/ama/ma35/include/xma/xmabuffers.h file.</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.xma_data_buffer_alloc">
<a class="reference internal" href="#c.XmaDataBuffer" title="XmaDataBuffer"><span class="n"><span class="pre">XmaDataBuffer</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">xma_data_buffer_alloc</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">XmaHandle</span></span><span class="w"> </span><span class="n"><span class="pre">handle</span></span>, <span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="n"><span class="pre">size</span></span>, <span class="kt"><span class="pre">bool</span></span><span class="w"> </span><span class="n"><span class="pre">dummy</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.xma_data_buffer_alloc" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p>This function creates a <a class="reference internal" href="#c.XmaDataBuffer" title="XmaDataBuffer"><code class="xref c c-macro docutils literal notranslate"><span class="pre">XmaDataBuffer</span></code></a> of the given size.</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.xma_data_from_buffer_clone">
<a class="reference internal" href="#c.XmaDataBuffer" title="XmaDataBuffer"><span class="n"><span class="pre">XmaDataBuffer</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">xma_data_from_buffer_clone</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">XmaHandle</span></span><span class="w"> </span><span class="n"><span class="pre">handle</span></span>, <span class="n"><span class="pre">uint8_t</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">data</span></span>, <span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="n"><span class="pre">size</span></span>, <span class="n"><span class="pre">xma_data_buffer_clone_free_callback_function</span></span><span class="w"> </span><span class="n"><span class="pre">free_callback</span></span>, <span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">opaque</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.xma_data_from_buffer_clone" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p>This function creates a <a class="reference internal" href="#c.XmaDataBuffer" title="XmaDataBuffer"><code class="xref c c-macro docutils literal notranslate"><span class="pre">XmaDataBuffer</span></code></a> that points to the provided buffer. <code class="docutils literal notranslate"><span class="pre">xma_data_buffer_clone_free_callback_function</span></code> will be called, when the buffer is no longer needed.</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.xma_data_buffer_free">
<span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">xma_data_buffer_free</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#c.XmaDataBuffer" title="XmaDataBuffer"><span class="n"><span class="pre">XmaDataBuffer</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">data</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.xma_data_buffer_free" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p>This function releases a previously created <a class="reference internal" href="#c.XmaDataBuffer" title="XmaDataBuffer"><code class="xref c c-macro docutils literal notranslate"><span class="pre">XmaDataBuffer</span></code></a>.</p>
</section>
<section id="xma-frame-interface">
<h3><a class="toc-backref" href="#id17" role="doc-backlink">XMA Frame Interface</a><a class="headerlink" href="#xma-frame-interface" title="Link to this heading">¶</a></h3>
<p>The external interface to the xma Frame consists of the following XMA functions:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#c.xma_frame_planes_get" title="xma_frame_planes_get"><code class="xref c c-func docutils literal notranslate"><span class="pre">xma_frame_planes_get()</span></code></a></p></li>
<li><p><a class="reference internal" href="#c.xma_frame_get_plane_height" title="xma_frame_get_plane_height"><code class="xref c c-func docutils literal notranslate"><span class="pre">xma_frame_get_plane_height()</span></code></a></p></li>
<li><p><a class="reference internal" href="#c.xma_frame_get_plane_stride" title="xma_frame_get_plane_stride"><code class="xref c c-func docutils literal notranslate"><span class="pre">xma_frame_get_plane_stride()</span></code></a></p></li>
<li><p><a class="reference internal" href="#c.xma_frame_get_plane_size" title="xma_frame_get_plane_size"><code class="xref c c-func docutils literal notranslate"><span class="pre">xma_frame_get_plane_size()</span></code></a></p></li>
<li><p><a class="reference internal" href="#c.xma_frame_alloc" title="xma_frame_alloc"><code class="xref c c-func docutils literal notranslate"><span class="pre">xma_frame_alloc()</span></code></a></p></li>
<li><p><a class="reference internal" href="#c.xma_frame_from_buffers_clone" title="xma_frame_from_buffers_clone"><code class="xref c c-func docutils literal notranslate"><span class="pre">xma_frame_from_buffers_clone()</span></code></a></p></li>
<li><p><a class="reference internal" href="#c.xma_frame_clone" title="xma_frame_clone"><code class="xref c c-func docutils literal notranslate"><span class="pre">xma_frame_clone()</span></code></a></p></li>
<li><p><a class="reference internal" href="#c.xma_frame_inc_ref" title="xma_frame_inc_ref"><code class="xref c c-func docutils literal notranslate"><span class="pre">xma_frame_inc_ref()</span></code></a></p></li>
<li><p><a class="reference internal" href="#c.xma_frame_dec_ref" title="xma_frame_dec_ref"><code class="xref c c-func docutils literal notranslate"><span class="pre">xma_frame_dec_ref()</span></code></a></p></li>
<li><p><a class="reference internal" href="#c.xma_frame_free" title="xma_frame_free"><code class="xref c c-func docutils literal notranslate"><span class="pre">xma_frame_free()</span></code></a></p></li>
</ul>
<p>The declaration of these functions can be found in the /opt/amd/ama/ma35/include/xma/xmabuffers.h file.</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.xma_frame_planes_get">
<span class="n"><span class="pre">int32_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">xma_frame_planes_get</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">XmaHandle</span></span><span class="w"> </span><span class="n"><span class="pre">handle</span></span>, <a class="reference internal" href="#c.XmaFrameProperties" title="XmaFrameProperties"><span class="n"><span class="pre">XmaFrameProperties</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">frame_props</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.xma_frame_planes_get" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p>This returns the number of planes for a given pixel format.</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.xma_frame_get_plane_height">
<span class="n"><span class="pre">int32_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">xma_frame_get_plane_height</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">XmaHandle</span></span><span class="w"> </span><span class="n"><span class="pre">handle</span></span>, <a class="reference internal" href="#c.XmaFrameProperties" title="XmaFrameProperties"><span class="n"><span class="pre">XmaFrameProperties</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">frame_props</span></span>, <span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="n"><span class="pre">plane</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.xma_frame_get_plane_height" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p>This returns the height of the plane based on the frame height, pixel format, and plane.</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.xma_frame_get_plane_stride">
<span class="n"><span class="pre">int32_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">xma_frame_get_plane_stride</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">XmaHandle</span></span><span class="w"> </span><span class="n"><span class="pre">handle</span></span>, <a class="reference internal" href="#c.XmaFrameProperties" title="XmaFrameProperties"><span class="n"><span class="pre">XmaFrameProperties</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">frame_props</span></span>, <span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="n"><span class="pre">plane</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.xma_frame_get_plane_stride" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p>This returns the stride of the plane based on the frame width, pixel format, and plane.</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.xma_frame_get_plane_size">
<span class="n"><span class="pre">int32_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">xma_frame_get_plane_size</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">XmaHandle</span></span><span class="w"> </span><span class="n"><span class="pre">handle</span></span>, <a class="reference internal" href="#c.XmaFrameProperties" title="XmaFrameProperties"><span class="n"><span class="pre">XmaFrameProperties</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">frame_props</span></span>, <span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="n"><span class="pre">plane</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.xma_frame_get_plane_size" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p>This returns the size of the plane based on the frame width, height, pixel format, and plane.</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.xma_frame_alloc">
<a class="reference internal" href="#c.XmaFrame" title="XmaFrame"><span class="n"><span class="pre">XmaFrame</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">xma_frame_alloc</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">XmaHandle</span></span><span class="w"> </span><span class="n"><span class="pre">handle</span></span>, <a class="reference internal" href="#c.XmaFrameProperties" title="XmaFrameProperties"><span class="n"><span class="pre">XmaFrameProperties</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">frame_props</span></span>, <span class="kt"><span class="pre">bool</span></span><span class="w"> </span><span class="n"><span class="pre">dummy</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.xma_frame_alloc" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p>This function creates a <a class="reference internal" href="#c.XmaFrame" title="XmaFrame"><code class="xref c c-macro docutils literal notranslate"><span class="pre">XmaFrame</span></code></a> with the given properties.</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.xma_frame_from_buffers_clone">
<a class="reference internal" href="#c.XmaFrame" title="XmaFrame"><span class="n"><span class="pre">XmaFrame</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">xma_frame_from_buffers_clone</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">XmaHandle</span></span><span class="w"> </span><span class="n"><span class="pre">handle</span></span>, <a class="reference internal" href="#c.XmaFrameProperties" title="XmaFrameProperties"><span class="n"><span class="pre">XmaFrameProperties</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">frame_props</span></span>, <span class="n"><span class="pre">XmaFrameData</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">frame_data</span></span>, <span class="n"><span class="pre">xma_frame_clone_free_callback_function</span></span><span class="w"> </span><span class="n"><span class="pre">free_callback</span></span>, <span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">opaque</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.xma_frame_from_buffers_clone" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p>This function creates a <a class="reference internal" href="#c.XmaFrame" title="XmaFrame"><code class="xref c c-macro docutils literal notranslate"><span class="pre">XmaFrame</span></code></a> that points to the provided data and with the given properties. <code class="docutils literal notranslate"><span class="pre">xma_frame_clone_free_callback_function</span></code> will be called when the data is no longer needed.</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.xma_frame_clone">
<a class="reference internal" href="#c.XmaFrame" title="XmaFrame"><span class="n"><span class="pre">XmaFrame</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">xma_frame_clone</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">XmaHandle</span></span><span class="w"> </span><span class="n"><span class="pre">handle</span></span>, <a class="reference internal" href="#c.XmaFrame" title="XmaFrame"><span class="n"><span class="pre">XmaFrame</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">xma_frame</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.xma_frame_clone" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p>This function creates a <a class="reference internal" href="#c.XmaFrame" title="XmaFrame"><code class="xref c c-macro docutils literal notranslate"><span class="pre">XmaFrame</span></code></a> that uses the same buffers as the provided <a class="reference internal" href="#c.XmaFrame" title="XmaFrame"><code class="xref c c-macro docutils literal notranslate"><span class="pre">XmaFrame</span></code></a>, but can have side data added or removed without affecting the original <a class="reference internal" href="#c.XmaFrame" title="XmaFrame"><code class="xref c c-macro docutils literal notranslate"><span class="pre">XmaFrame</span></code></a>.</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.xma_frame_inc_ref">
<span class="n"><span class="pre">int32_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">xma_frame_inc_ref</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#c.XmaFrame" title="XmaFrame"><span class="n"><span class="pre">XmaFrame</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">frame</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.xma_frame_inc_ref" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p>This function increases the reference count of the given <a class="reference internal" href="#c.XmaFrame" title="XmaFrame"><code class="xref c c-macro docutils literal notranslate"><span class="pre">XmaFrame</span></code></a>.</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.xma_frame_dec_ref">
<span class="n"><span class="pre">int32_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">xma_frame_dec_ref</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#c.XmaFrame" title="XmaFrame"><span class="n"><span class="pre">XmaFrame</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">frame</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.xma_frame_dec_ref" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p>This function decreases the reference count of the given <a class="reference internal" href="#c.XmaFrame" title="XmaFrame"><code class="xref c c-macro docutils literal notranslate"><span class="pre">XmaFrame</span></code></a>.</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.xma_frame_free">
<span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">xma_frame_free</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#c.XmaFrame" title="XmaFrame"><span class="n"><span class="pre">XmaFrame</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">frame</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.xma_frame_free" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p>This function releases a <a class="reference internal" href="#c.XmaFrame" title="XmaFrame"><code class="xref c c-macro docutils literal notranslate"><span class="pre">XmaFrame</span></code></a> that was created with the previous functions.</p>
</section>
</section>
<section id="sdk-api">
<h2><a class="toc-backref" href="#id18" role="doc-backlink">1.0 SDK API</a><a class="headerlink" href="#sdk-api" title="Link to this heading">¶</a></h2>
<p>The following subsections describe APIs applicable to 1.0 SDK. Note that these APIs serve as bases for future versions. In order to allow forwards and backwards ABI compatibility, the application can now set which version of the API to use. If no version is set, version 1.0 is assumed. When a version is set, only features available in that version are allowed. This means if a feature was deprecated in an earlier version, or was added in a later version, it cannot be used and will either be ignored or returned as an error.</p>
<p id="id2">To set the API version, use the following code snippet:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">XmaParameter</span> <span class="n">params</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
<span class="n">uint32_t</span> <span class="n">api_version</span> <span class="o">=</span> <span class="n">XMA_API_VERSION_M_</span> <span class="n">m</span><span class="p">;</span>

<span class="n">params</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="p">(</span><span class="n">char</span><span class="o">*</span><span class="p">)</span><span class="n">XMA_API_VERSION</span><span class="p">;</span>
<span class="n">params</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">XMA_UINT32</span><span class="p">;</span>
<span class="n">params</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">length</span> <span class="o">=</span> <span class="n">sizeof</span><span class="p">(</span><span class="n">uint32_t</span><span class="p">);</span>
<span class="n">params</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">api_version</span><span class="p">;</span>

<span class="n">xma_init_param</span><span class="o">.</span><span class="n">params</span>        <span class="o">=</span> <span class="n">params</span><span class="p">;</span>
<span class="n">xma_init_param</span><span class="o">.</span><span class="n">param_cnt</span>     <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="n">xma_initialize</span><span class="p">(</span><span class="n">logger</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">xma_init_param</span><span class="p">,</span> <span class="n">handle</span><span class="p">);</span>
</pre></div>
</div>
<p>, where <code class="docutils literal notranslate"><span class="pre">M</span></code> and <code class="docutils literal notranslate"><span class="pre">m</span></code> are major and minor versions of the SDK, e.g., for SDK 1.0 the macro becomes <code class="docutils literal notranslate"><span class="pre">XMA_API_VERSION_1_0</span></code>.</p>
<section id="decoder-plugin-reference">
<h3><a class="toc-backref" href="#id19" role="doc-backlink">Decoder Plugin Reference</a><a class="headerlink" href="#decoder-plugin-reference" title="Link to this heading">¶</a></h3>
<section id="decoder-interface">
<h4>Decoder Interface<a class="headerlink" href="#decoder-interface" title="Link to this heading">¶</a></h4>
<p>The external interface to the decoder plugin consists of the following XMA functions:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#c.xma_dec_session_create" title="xma_dec_session_create"><code class="xref c c-func docutils literal notranslate"><span class="pre">xma_dec_session_create()</span></code></a></p></li>
<li><p><code class="xref c c-func docutils literal notranslate"><span class="pre">xma_dec_set_log()</span></code></p></li>
<li><p><a class="reference internal" href="#c.xma_dec_session_send_data" title="xma_dec_session_send_data"><code class="xref c c-func docutils literal notranslate"><span class="pre">xma_dec_session_send_data()</span></code></a></p></li>
<li><p><a class="reference internal" href="#c.xma_dec_session_get_properties" title="xma_dec_session_get_properties"><code class="xref c c-func docutils literal notranslate"><span class="pre">xma_dec_session_get_properties()</span></code></a></p></li>
<li><p><a class="reference internal" href="#c.xma_dec_session_recv_frame" title="xma_dec_session_recv_frame"><code class="xref c c-func docutils literal notranslate"><span class="pre">xma_dec_session_recv_frame()</span></code></a></p></li>
<li><p><a class="reference internal" href="#c.xma_dec_session_destroy" title="xma_dec_session_destroy"><code class="xref c c-func docutils literal notranslate"><span class="pre">xma_dec_session_destroy()</span></code></a></p></li>
</ul>
<p>The declaration of these functions can be found in the /opt/amd/ama/ma35/include/xma/xmadecoder.h file.</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.xma_dec_session_create">
<span class="n"><span class="pre">XmaDecoderSession</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">xma_dec_session_create</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#c.XmaDecoderProperties" title="XmaDecoderProperties"><span class="n"><span class="pre">XmaDecoderProperties</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">dec_props</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.xma_dec_session_create" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p>This function creates a decoder session and must be called prior to decoding data. The hardware resources required to run the session must be previously reserved using the <a class="reference internal" href="#xrm-api-reference"><span class="std std-ref">XRM APIs</span></a> and should not be released until after the session is destroyed. The number of sessions allowed depends on several factors that include: resolution, frame rate, bit depth, and the capabilities of the hardware accelerator.</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.xma_dec_session_set_log">
<span class="n"><span class="pre">int32_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">xma_dec_session_set_log</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">XmaDecoderSession</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">session</span></span>, <span class="n"><span class="pre">XmaLogHandle</span></span><span class="w"> </span><span class="n"><span class="pre">handle</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.xma_dec_session_set_log" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p>This function changes the logging from the default (set in <a class="reference internal" href="#c.xma_initialize" title="xma_initialize"><code class="xref c c-func docutils literal notranslate"><span class="pre">xma_initialize()</span></code></a>) to some other logging.</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.xma_dec_session_send_data">
<span class="n"><span class="pre">int32_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">xma_dec_session_send_data</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">XmaDecoderSession</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">session</span></span>, <a class="reference internal" href="#c.XmaDataBuffer" title="XmaDataBuffer"><span class="n"><span class="pre">XmaDataBuffer</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">data</span></span>, <span class="n"><span class="pre">int32_t</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">data_used</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.xma_dec_session_send_data" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p>This function sends input frame data to the hardware decoder by way of the plugin. The application needs to parse the input encoded stream and send one frame of data at a time in a <a class="reference internal" href="#c.XmaDataBuffer" title="XmaDataBuffer"><code class="xref c c-struct docutils literal notranslate"><span class="pre">XmaDataBuffer</span></code></a> data structure.</p>
<p>The <code class="xref c c-var docutils literal notranslate"><span class="pre">data_used</span></code> value indicates the amount of input data consumed by the decoder.</p>
<p>If the function returns <code class="xref c c-macro docutils literal notranslate"><span class="pre">XMA_SUCCESS</span></code>, then the decoder was able to consume the entirety of the available data and <code class="xref c c-var docutils literal notranslate"><span class="pre">data_used</span></code> will be set accordingly. In this case, the application can proceed with fetching decoded data using the <a class="reference internal" href="#c.xma_dec_session_recv_frame" title="xma_dec_session_recv_frame"><code class="xref c c-func docutils literal notranslate"><span class="pre">xma_dec_session_recv_frame()</span></code></a> API.</p>
<p>If the function returns <code class="xref c c-macro docutils literal notranslate"><span class="pre">XMA_TRY_AGAIN</span></code>, then the decoder was did not consume any of the input data and <code class="xref c c-var docutils literal notranslate"><span class="pre">data_used</span></code> will be reported as 0. In this case, the application can proceed with fetching previously decoded data with the <a class="reference internal" href="#c.xma_dec_session_recv_frame" title="xma_dec_session_recv_frame"><code class="xref c c-func docutils literal notranslate"><span class="pre">xma_dec_session_recv_frame()</span></code></a> function but must send the same input again using using <a class="reference internal" href="#c.xma_dec_session_send_data" title="xma_dec_session_send_data"><code class="xref c c-func docutils literal notranslate"><span class="pre">xma_dec_session_send_data()</span></code></a> until the function returns <code class="xref c c-macro docutils literal notranslate"><span class="pre">XMA_SUCCESS</span></code>.</p>
<p>If the function returns <code class="xref c c-macro docutils literal notranslate"><span class="pre">XMA_SEND_MORE_DATA</span></code>, then the data sent is being processed, but more is required before any frames will be available.</p>
<p>Once the application has sent all the input frames to the decoder, it must notify the decoder by sending a null buffer. The application should then continue sending null buffers in order to flush out all the output YUV frames.</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.xma_dec_session_get_properties">
<span class="n"><span class="pre">int32_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">xma_dec_session_get_properties</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">XmaDecoderSession</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">dec_session</span></span>, <a class="reference internal" href="#c.XmaFrameProperties" title="XmaFrameProperties"><span class="n"><span class="pre">XmaFrameProperties</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">fprops</span></span><span class="sig-paren">)</span><span class="p"><span class="pre">;</span></span><a class="headerlink" href="#c.xma_dec_session_get_properties" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p>This function returns the decoder properties such as width, height, output format, and frame rate.</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.xma_dec_session_recv_frame">
<span class="n"><span class="pre">int32_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">xma_dec_session_recv_frame</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">XmaDecoderSession</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">session</span></span>, <a class="reference internal" href="#c.XmaFrame" title="XmaFrame"><span class="n"><span class="pre">XmaFrame</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">frame</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.xma_dec_session_recv_frame" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p>This function tries to fetch a decoded YUV frame from the hardware accelerator.</p>
<p>If the function returns <code class="xref c c-macro docutils literal notranslate"><span class="pre">XMA_SUCCESS</span></code>, a valid YUV frame pointer is available in the buffer pointer of the <a class="reference internal" href="#c.XmaFrame" title="XmaFrame"><code class="xref c c-struct docutils literal notranslate"><span class="pre">XmaFrame</span></code></a> argument.</p>
<p>If the function returns <code class="xref c c-macro docutils literal notranslate"><span class="pre">XMA_TRY_AGAIN</span></code>, then the decoder still needs some input data to produce a complete YUV output frame.</p>
<p>If the function returns <code class="xref c c-macro docutils literal notranslate"><span class="pre">XMA_EOS</span></code>, then the decoder has flushed out all the frames.</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.xma_dec_session_destroy">
<span class="n"><span class="pre">int32_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">xma_dec_session_destroy</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">XmaDecoderSession</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">session</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.xma_dec_session_destroy" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p>This function destroys a decoder session that was previously created with the <a class="reference internal" href="#c.xma_dec_session_create" title="xma_dec_session_create"><code class="xref c c-func docutils literal notranslate"><span class="pre">xma_dec_session_create()</span></code></a> function.</p>
</section>
<section id="decoder-properties">
<h4>Decoder Properties<a class="headerlink" href="#decoder-properties" title="Link to this heading">¶</a></h4>
<p>The AMD AMA Video SDK decoder is configured using a combination of standard XMA decoder properties and custom decoder parameters, both of which are specified using a <a class="reference internal" href="#c.XmaDecoderProperties" title="XmaDecoderProperties"><code class="xref c c-struct docutils literal notranslate"><span class="pre">XmaDecoderProperties</span></code></a> data structure. The declaration of <a class="reference internal" href="#c.XmaDecoderProperties" title="XmaDecoderProperties"><code class="xref c c-struct docutils literal notranslate"><span class="pre">XmaDecoderProperties</span></code></a> can be found in the /opt/amd/ama/ma35/include/xma/xmadecoder.h file.</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
<dl class="c struct">
<dt class="sig sig-object c" id="c.XmaDecoderProperties">
<span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">XmaDecoderProperties</span></span></span><a class="headerlink" href="#c.XmaDecoderProperties" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p>This data structure is used to configure the AMD AMA Video SDK decoder.</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p class="rubric">Standard XMA Decoder Properties</p>
<p>When using the decoder plugin, the following members of the <a class="reference internal" href="#c.XmaDecoderProperties" title="XmaDecoderProperties"><code class="xref c c-struct docutils literal notranslate"><span class="pre">XmaDecoderProperties</span></code></a> data structure must be set by the application:</p>
<dl class="simple">
<dt>hwdecoder_type</dt><dd><p>Specifying type of decoder to reserve.</p>
</dd>
<dt>params</dt><dd><p>Array of custom initialization parameters.
See the next section for the list of custom parameters supported by the decoder plugin.</p>
</dd>
<dt>param_cnt</dt><dd><p>Count of custom parameters.</p>
</dd>
<dt>width</dt><dd><p>Width in pixels of incoming video stream/data.
Valid values are even integers between 128 and 3840.
Portrait mode is supported.</p>
</dd>
<dt>height</dt><dd><p>Height in pixels of incoming video stream/data.
Valid values are even integers between 128 and 2160.</p>
</dd>
<dt>bits_per_pixel</dt><dd><p>Bits per pixel for primary plane of output video.
Must be set to 8 or 10 bits per pixel.</p>
</dd>
<dt>flags</dt><dd><p>Sets on-device frame property to XMA_FRAME_PROPERTY_FLAG_TILE_4x4 and/or XMA_FRAME_PROPERTY_FLAG_COMPRESS.</p>
</dd>
<dt>handle</dt><dd><p>handle to XMA device.</p>
</dd>
</dl>
<p class="rubric">Custom Decoder Parameters</p>
<p>In addition to the standard properties, the following <a class="reference internal" href="#c.XmaParameter" title="XmaParameter"><code class="xref c c-struct docutils literal notranslate"><span class="pre">XmaParameter</span></code></a> custom parameters are supported by the decoder plugin:</p>
<dl class="simple">
<dt>&quot;out_fmt&quot;</dt><dd><p>XMA pixel format. See <a class="reference internal" href="using_ffmpeg.html#cmdoption-out_fmt"><code class="xref std std-option docutils literal notranslate"><span class="pre">-out_fmt</span></code></a> for available options.</p>
</dd>
<dt>“low_latency”</dt><dd><p>Set to 1 to enable low latency mode.</p>
</dd>
<dt>&quot;latency_logging&quot;</dt><dd><p>Set to 1 to enable logging of latency information to the xma log.</p>
</dd>
</dl>
<div class="line-block">
<div class="line"><br /></div>
</div>
</section>
</section>
<section id="scaler-plugin-reference">
<h3><a class="toc-backref" href="#id20" role="doc-backlink">Scaler Plugin Reference</a><a class="headerlink" href="#scaler-plugin-reference" title="Link to this heading">¶</a></h3>
<section id="scaler-interface">
<h4>Scaler Interface<a class="headerlink" href="#scaler-interface" title="Link to this heading">¶</a></h4>
<p>The external interface to the scaler plugin consists of the following XMA application-level functions:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#c.xma_scaler_session_create" title="xma_scaler_session_create"><code class="xref c c-func docutils literal notranslate"><span class="pre">xma_scaler_session_create()</span></code></a></p></li>
<li><p><code class="xref c c-func docutils literal notranslate"><span class="pre">xma_scaler_set_log()</span></code></p></li>
<li><p><a class="reference internal" href="#c.xma_scaler_session_send_frame" title="xma_scaler_session_send_frame"><code class="xref c c-func docutils literal notranslate"><span class="pre">xma_scaler_session_send_frame()</span></code></a></p></li>
<li><p><a class="reference internal" href="#c.xma_scaler_session_recv_frame_list" title="xma_scaler_session_recv_frame_list"><code class="xref c c-func docutils literal notranslate"><span class="pre">xma_scaler_session_recv_frame_list()</span></code></a></p></li>
<li><p><a class="reference internal" href="#c.xma_scaler_session_destroy" title="xma_scaler_session_destroy"><code class="xref c c-func docutils literal notranslate"><span class="pre">xma_scaler_session_destroy()</span></code></a></p></li>
</ul>
<p>The declaration of these functions can be found in the /opt/amd/ama/ma35/include/xma/xmascaler.h file.</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.xma_scaler_session_create">
<span class="n"><span class="pre">XmaScalerSession</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">xma_scaler_session_create</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#c.XmaScalerProperties" title="XmaScalerProperties"><span class="n"><span class="pre">XmaScalerProperties</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">props</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.xma_scaler_session_create" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p>This function creates scaler session and must be called prior to sending input frames. The hardware resources required to run the session must be previously reserved using the XRM APIs and should not be released until after the session is destroyed. The number of sessions allowed depends on several factors that include: resolution, frame rate, bit depth, and the capabilities of the hardware accelerator.</p>
<p>This function changes the logging from the default (set in <a class="reference internal" href="#c.xma_initialize" title="xma_initialize"><code class="xref c c-func docutils literal notranslate"><span class="pre">xma_initialize()</span></code></a>) to some other logging.</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.xma_scaler_session_send_frame">
<span class="n"><span class="pre">int32_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">xma_scaler_session_send_frame</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">XmaScalerSession</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">session</span></span>, <a class="reference internal" href="#c.XmaFrame" title="XmaFrame"><span class="n"><span class="pre">XmaFrame</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">frame</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.xma_scaler_session_send_frame" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p>This function sends a YUV frame to the underlying XMA plugin( and eventually to hardware to scale the input frame to one or multiple resolutions.</p>
<p>The application can take further action depending upon the return value from this API.</p>
<p>If the function returns XMA_SUCCESS, then the application can proceed to fetch scaled output frames.</p>
<p>If the function returns XMA_SEND_MORE_DATA, then the application should proceed with sending next YUV frame.</p>
<p>If the function returns XMA_FLUSH_AGAIN it means that the application should keep flushing the scaler.</p>
<p>Once the application has sent all the input frames to the scaler, it must notify the scaler by sending a null frame to flush the scaler.</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.xma_scaler_session_recv_frame_list">
<span class="n"><span class="pre">int32_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">xma_scaler_session_recv_frame_list</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">XmaScalerSession</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">session</span></span>, <a class="reference internal" href="#c.XmaFrame" title="XmaFrame"><span class="n"><span class="pre">XmaFrame</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">frame_list</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.xma_scaler_session_recv_frame_list" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p>This function is called after calling the <a class="reference internal" href="#c.xma_scaler_session_send_frame" title="xma_scaler_session_send_frame"><code class="xref c c-func docutils literal notranslate"><span class="pre">xma_scaler_session_send_frame()</span></code></a>. This function returns a list of output frames with every call until it reaches end of scaling. Return codes can only be <code class="xref c c-macro docutils literal notranslate"><span class="pre">XMA_SUCCESS</span></code> and <code class="xref c c-macro docutils literal notranslate"><span class="pre">XMA_ERROR</span></code>.</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.xma_scaler_session_destroy">
<span class="n"><span class="pre">int32_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">xma_scaler_session_destroy</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">XmaScalerSession</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">session</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.xma_scaler_session_destroy" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p>This function destroys scaler session that was previously created with the <a class="reference internal" href="#c.xma_scaler_session_create" title="xma_scaler_session_create"><code class="xref c c-func docutils literal notranslate"><span class="pre">xma_scaler_session_create()</span></code></a> function.</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
</section>
<section id="scaler-properties">
<h4>Scaler Properties<a class="headerlink" href="#scaler-properties" title="Link to this heading">¶</a></h4>
<p>The AMD AMA Video SDK scaler is configured using a combination of standard XMA scaler properties, standard XMA scaler input and output properties and custom scaler parameters, all of which are specified using <a class="reference internal" href="#c.XmaScalerProperties" title="XmaScalerProperties"><code class="xref c c-struct docutils literal notranslate"><span class="pre">XmaScalerProperties</span></code></a> and <a class="reference internal" href="#c.XmaScalerInOutProperties" title="XmaScalerInOutProperties"><code class="xref c c-struct docutils literal notranslate"><span class="pre">XmaScalerInOutProperties</span></code></a> data structures.</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
<dl class="c struct">
<dt class="sig sig-object c" id="c.XmaScalerProperties">
<span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">XmaScalerProperties</span></span></span><a class="headerlink" href="#c.XmaScalerProperties" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p>This data structure is used to configure the video scaler. The declaration of <a class="reference internal" href="#c.XmaScalerProperties" title="XmaScalerProperties"><code class="xref c c-struct docutils literal notranslate"><span class="pre">XmaScalerProperties</span></code></a> can be found in the /opt/amd/ama/ma35/include/xma/xmascaler.h file.</p>
<dl class="c struct">
<dt class="sig sig-object c" id="c.XmaScalerInOutProperties">
<span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">XmaScalerInOutProperties</span></span></span><a class="headerlink" href="#c.XmaScalerInOutProperties" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p>This data structure is used to configure the input and outputs of the video scaler. The <code class="xref c c-struct docutils literal notranslate"><span class="pre">XmaScalerFilterProperties</span></code> data structure contains one <a class="reference internal" href="#c.XmaScalerInOutProperties" title="XmaScalerInOutProperties"><code class="xref c c-struct docutils literal notranslate"><span class="pre">XmaScalerInOutProperties</span></code></a> for the scaler input and an array of 16 <a class="reference internal" href="#c.XmaScalerInOutProperties" title="XmaScalerInOutProperties"><code class="xref c c-struct docutils literal notranslate"><span class="pre">XmaScalerInOutProperties</span></code></a> for the scaler outputs. The declaration of <a class="reference internal" href="#c.XmaScalerInOutProperties" title="XmaScalerInOutProperties"><code class="xref c c-struct docutils literal notranslate"><span class="pre">XmaScalerInOutProperties</span></code></a> can be found in the /opt/amd/ama/ma35/include/xma/xmascaler.h file.</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p class="rubric">Standard XMA Scaler Properties</p>
<p>When using the scaler plugin, the following members of the <a class="reference internal" href="#c.XmaScalerProperties" title="XmaScalerProperties"><code class="xref c c-struct docutils literal notranslate"><span class="pre">XmaScalerProperties</span></code></a> data structure must be set by the application:</p>
<dl class="simple">
<dt>hwscaler_type</dt><dd><p>Type of scaler. Must be set to <code class="xref c c-macro docutils literal notranslate"><span class="pre">XMA_ABR_SCALER_TYPE</span></code>.</p>
</dd>
<dt>num_outputs</dt><dd><p>Number of scaler outputs.</p>
</dd>
<dt>params</dt><dd><p>Array of custom initialization parameters.
See the next section for the list of custom parameters supported by the scaler plugin.</p>
</dd>
<dt>param_cnt</dt><dd><p>Count of custom parameters.</p>
</dd>
<dt>input</dt><dd><p>Input property of type <a class="reference internal" href="#c.XmaScalerInOutProperties" title="XmaScalerInOutProperties"><code class="xref c c-struct docutils literal notranslate"><span class="pre">XmaScalerInOutProperties</span></code></a></p>
</dd>
<dt>output</dt><dd><p>Output properties an array of type <a class="reference internal" href="#c.XmaScalerInOutProperties" title="XmaScalerInOutProperties"><code class="xref c c-struct docutils literal notranslate"><span class="pre">XmaScalerInOutProperties</span></code></a> of size <code class="docutils literal notranslate"><span class="pre">num_outputs</span></code></p>
</dd>
</dl>
<p class="rubric">XMA Scaler Input and Output Properties</p>
<p>When configuring the scaler input and outputs, the following members of the <a class="reference internal" href="#c.XmaScalerInOutProperties" title="XmaScalerInOutProperties"><code class="xref c c-struct docutils literal notranslate"><span class="pre">XmaScalerInOutProperties</span></code></a> data structure must be set by the application:</p>
<dl class="simple">
<dt>format</dt><dd><p>Host side input video format.
Must be set to <code class="xref c c-macro docutils literal notranslate"><span class="pre">XMA_VPE_FMT_TYPE</span></code></p>
</dd>
<dt>sw_format</dt><dd><p>Device side video format. Valid values are XMA_NV12_FMT_TYPE, XMA_P010LE_FMT_TYPE, XMA_PACKED10_FMT_TYPE, XMA_RGB24_FMT_TYPE, XMA_YUV420P_FMT_TYPE, XMA_YUV420P10LE_FMT_TYPE.</p>
</dd>
<dt>width</dt><dd><p>Width in pixels of video stream/data.
Valid values are integers between 128 and 3840, in multiples of 4.
Portrait mode is supported.</p>
</dd>
<dt>height</dt><dd><p>Height in pixels of video stream/data.
Valid values are even integers between 128 and 2160, in multiples of 4.</p>
</dd>
<dt>framerate</dt><dd><p>Framerate data structure specifying frame rate per second.</p>
</dd>
<dt>flags</dt><dd><p>Sets on-device frame property to XMA_FRAME_PROPERTY_FLAG_TILE_4x4 and/or XMA_FRAME_PROPERTY_FLAG_COMPRESS</p>
</dd>
</dl>
<p>Other members of <a class="reference internal" href="#c.XmaScalerInOutProperties" title="XmaScalerInOutProperties"><code class="xref c c-struct docutils literal notranslate"><span class="pre">XmaScalerInOutProperties</span></code></a> are not applicable to the scaler plugin and should not be used.</p>
<p class="rubric">Custom Scaler Parameters</p>
<p>In addition to the standard properties, the following <a class="reference internal" href="#c.XmaParameter" title="XmaParameter"><code class="xref c c-struct docutils literal notranslate"><span class="pre">XmaParameter</span></code></a> custom parameters are supported by the scaler plugin:</p>
<dl class="simple">
<dt>&quot;mix_rate&quot;</dt><dd><p>This parameter is used to configure mix-rate sessions where some scaler outputs are configured at the input frame rate and some other outputs will be configured at half the rate.</p>
</dd>
<dt>“top”</dt><dd><p>Cropping the top of the video before scaling.</p>
</dd>
<dt>“width”</dt><dd><p>Cropping the width of the video before scaling.</p>
</dd>
<dt>“height”</dt><dd><p>Cropping the height of the video before scaling.</p>
</dd>
<dt>&quot;latency_logging&quot;</dt><dd><p>Set to 1 to enable logging of latency information to XMA logs. Set to 0 to disable logging.</p>
</dd>
</dl>
<div class="line-block">
<div class="line"><br /></div>
</div>
</section>
</section>
<section id="encoder-plugin-reference">
<h3><a class="toc-backref" href="#id21" role="doc-backlink">Encoder Plugin Reference</a><a class="headerlink" href="#encoder-plugin-reference" title="Link to this heading">¶</a></h3>
<section id="encoder-interface">
<h4>Encoder Interface<a class="headerlink" href="#encoder-interface" title="Link to this heading">¶</a></h4>
<p>The external interface to the encoder plugin consists of the following XMA application-level functions:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#c.xma_enc_session_create" title="xma_enc_session_create"><code class="xref c c-func docutils literal notranslate"><span class="pre">xma_enc_session_create()</span></code></a></p></li>
<li><p><a class="reference internal" href="#c.xma_enc_session_set_log" title="xma_enc_session_set_log"><code class="xref c c-func docutils literal notranslate"><span class="pre">xma_enc_session_set_log()</span></code></a></p></li>
<li><p><a class="reference internal" href="#c.xma_enc_session_send_frame" title="xma_enc_session_send_frame"><code class="xref c c-func docutils literal notranslate"><span class="pre">xma_enc_session_send_frame()</span></code></a></p></li>
<li><p><a class="reference internal" href="#c.xma_enc_session_recv_data" title="xma_enc_session_recv_data"><code class="xref c c-func docutils literal notranslate"><span class="pre">xma_enc_session_recv_data()</span></code></a></p></li>
<li><p><a class="reference internal" href="#c.xma_enc_session_destroy" title="xma_enc_session_destroy"><code class="xref c c-func docutils literal notranslate"><span class="pre">xma_enc_session_destroy()</span></code></a></p></li>
</ul>
<p>The declaration of these functions can be found in the /opt/amd/ama/ma35/include/xma/xmaencoder.h file.</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.xma_enc_session_create">
<span class="n"><span class="pre">XmaEncoderSession</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">xma_enc_session_create</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#c.XmaEncoderProperties" title="XmaEncoderProperties"><span class="n"><span class="pre">XmaEncoderProperties</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">enc_props</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.xma_enc_session_create" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p>This function creates an encoder session and must be called prior to encoding input YUV. The hardware resources required to run the session must be previously reserved using the <a class="reference internal" href="#xrm-api-reference"><span class="std std-ref">XRM APIs</span></a> and should not be released until after the session is destroyed. The number of sessions allowed depends on several factors that include: resolution, frame rate, bit depth, and the capabilities of the hardware accelerator.</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.xma_enc_session_set_log">
<span class="n"><span class="pre">int32_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">xma_enc_session_set_log</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">XmaEncoderSession</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">session</span></span>, <span class="n"><span class="pre">XmaLogHandle</span></span><span class="w"> </span><span class="n"><span class="pre">handle</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.xma_enc_session_set_log" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p>This function changes the logging from the default (set in <a class="reference internal" href="#c.xma_initialize" title="xma_initialize"><code class="xref c c-func docutils literal notranslate"><span class="pre">xma_initialize()</span></code></a>) to some other logging.</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.xma_enc_session_send_frame">
<span class="n"><span class="pre">int32_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">xma_enc_session_send_frame</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">XmaEncoderSession</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">session</span></span>, <a class="reference internal" href="#c.XmaFrame" title="XmaFrame"><span class="n"><span class="pre">XmaFrame</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">frame</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.xma_enc_session_send_frame" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p>This function sends a YUV frame to the hardware encoder by way of the plugin.</p>
<p>Each time the application calls this function, it must provide a <a class="reference internal" href="#c.XmaFrame" title="XmaFrame"><code class="xref c c-struct docutils literal notranslate"><span class="pre">XmaFrame</span></code></a> containing YUV data and information about this frame (<a class="reference internal" href="#c.XmaFrameProperties" title="XmaFrameProperties"><code class="xref c c-struct docutils literal notranslate"><span class="pre">XmaFrameProperties</span></code></a>).</p>
<p>If the function returns XMA_SUCCESS, then the application can proceed to fetch the encoded data using the <a class="reference internal" href="#c.xma_enc_session_recv_data" title="xma_enc_session_recv_data"><code class="xref c c-func docutils literal notranslate"><span class="pre">xma_enc_session_recv_data()</span></code></a> API.</p>
<p>If the function returns XMA_SEND_MORE_DATA, then the application must send the next YUV frame before calling <a class="reference internal" href="#c.xma_enc_session_recv_data" title="xma_enc_session_recv_data"><code class="xref c c-func docutils literal notranslate"><span class="pre">xma_enc_session_recv_data()</span></code></a>.</p>
<p>Once the application has sent all the input frames to the encoder, it should notify the hardware by sending a null frame. If the API returns XMA_SUCCESS after a null frame is sent, then the application can call <a class="reference internal" href="#c.xma_enc_session_recv_data" title="xma_enc_session_recv_data"><code class="xref c c-func docutils literal notranslate"><span class="pre">xma_enc_session_recv_data()</span></code></a> but must send a null frame again.</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.xma_enc_session_recv_data">
<span class="n"><span class="pre">int32_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">xma_enc_session_recv_data</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">XmaEncoderSession</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">session</span></span>, <a class="reference internal" href="#c.XmaDataBuffer" title="XmaDataBuffer"><span class="n"><span class="pre">XmaDataBuffer</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">data</span></span>, <span class="n"><span class="pre">int32_t</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">data_size</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.xma_enc_session_recv_data" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p>This function is called after calling the function <a class="reference internal" href="#c.xma_enc_session_send_frame" title="xma_enc_session_send_frame"><code class="xref c c-func docutils literal notranslate"><span class="pre">xma_enc_session_send_frame()</span></code></a>. The application is responsible for allocating the &quot;dummy&quot; XmaDataBuffer using one of the provided functions. It is also responsible for releasing it when done.</p>
<p>If the function returns XMA_SUCCESS, then valid output data is available.</p>
<p>If the function returns XMA_RESEND_AND_RECV, a data buffer is not ready to be returned and the length of the data buffer is set to 0. The <a class="reference internal" href="#c.XmaDataBuffer" title="XmaDataBuffer"><code class="xref c c-struct docutils literal notranslate"><span class="pre">XmaDataBuffer</span></code></a> is untouched and can either be reused or released.</p>
<p>If the function returns XMA_EOS, the encoder has flushed all the output frames. The <a class="reference internal" href="#c.XmaDataBuffer" title="XmaDataBuffer"><code class="xref c c-struct docutils literal notranslate"><span class="pre">XmaDataBuffer</span></code></a> is untouched and must be released.</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.xma_enc_session_destroy">
<span class="n"><span class="pre">int32_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">xma_enc_session_destroy</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">XmaEncoderSession</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">session</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.xma_enc_session_destroy" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p>This function destroys an encoder session that was previously created with the <a class="reference internal" href="#c.xma_enc_session_create" title="xma_enc_session_create"><code class="xref c c-func docutils literal notranslate"><span class="pre">xma_enc_session_create()</span></code></a> function.</p>
</section>
<section id="encoder-properties">
<h4>Encoder Properties<a class="headerlink" href="#encoder-properties" title="Link to this heading">¶</a></h4>
<p>The AMD AMA Video SDK encoder is configured using a combination of standard XMA encoder properties and custom encoder parameters, both of which are specified using a <a class="reference internal" href="#c.XmaEncoderProperties" title="XmaEncoderProperties"><code class="xref c c-struct docutils literal notranslate"><span class="pre">XmaEncoderProperties</span></code></a> data structure.</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
<dl class="c struct">
<dt class="sig sig-object c" id="c.XmaEncoderProperties">
<span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">XmaEncoderProperties</span></span></span><a class="headerlink" href="#c.XmaEncoderProperties" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p>This data structure is used to configure the video encoder. The declaration of <a class="reference internal" href="#c.XmaEncoderProperties" title="XmaEncoderProperties"><code class="xref c c-struct docutils literal notranslate"><span class="pre">XmaEncoderProperties</span></code></a> can be found in the /opt/amd/ama/ma35/include/xma/xmaencoder.h file.</p>
<p class="rubric">Standard XMA Encoder Properties</p>
<p>When using the encoder plugin, the following members of the <a class="reference internal" href="#c.XmaEncoderProperties" title="XmaEncoderProperties"><code class="xref c c-struct docutils literal notranslate"><span class="pre">XmaEncoderProperties</span></code></a> data structure must be set by the application:</p>
<dl class="simple">
<dt>hwencoder_type</dt><dd><p>Specify type of encoder to reserve.</p>
</dd>
<dt>format</dt><dd><p>Host side input video format.
Must be set to <code class="xref c c-macro docutils literal notranslate"><span class="pre">XMA_VPE_FMT_TYPE</span></code></p>
</dd>
<dt>sw_format</dt><dd><p>Device side input video format. Valid values are XMA_NV12_FMT_TYPE, XMA_P010LE_FMT_TYPE, XMA_PACKED10_FMT_TYPE, XMA_RGB24_FMT_TYPE, XMA_YUV420P_FMT_TYPE, XMA_YUV420P10LE_FMT_TYPE.</p>
</dd>
<dt>width</dt><dd><p>Width in pixels of incoming video stream/data.
Valid values are even integers between 128 and 3840.
Portrait mode is supported.</p>
</dd>
<dt>height</dt><dd><p>Height in pixels of incoming video stream/data.
Valid values are even integers between 128 and 2160.</p>
</dd>
<dt>framerate</dt><dd><p>Framerate data structure specifying frame rate per second</p>
</dd>
<dt>lookahead_depth</dt><dd><p>The lookahead module depth to give start giving lookahead data.
Supported values are 0 to 40.</p>
</dd>
<dt>rc_mode</dt><dd><p>Rate control mode for custom rate control
Supported values are 0 (constant QP), 1 (CBR), 2 (VBR), and 3 (CVBR).</p>
</dd>
<dt>bitrate</dt><dd><p>Bitrate of output data (in kbps).</p>
</dd>
<dt>qp</dt><dd><p>Fixed quantization value. Valid values are 0-51 for H.264 or HEVC, 0-255 for AV1, or -1 (not used).</p>
</dd>
<dt>gop_size</dt><dd><p>Maximum group of pictures size in frames.</p>
</dd>
<dt>temp_aq_gain</dt><dd><p>Temporal AQ Gain. Valid values are 0-255.</p>
</dd>
<dt>spat_aq_gain</dt><dd><p>Spatial AQ Gain. Valid values are 0-255.</p>
</dd>
<dt>minQP</dt><dd><p>Minimum QP. Valid values are 0-51 for H.264 or HEVC, 0-255 for AV1, or -1 (not used).</p>
</dd>
<dt>maxQP</dt><dd><p>Maximum QP. Valid values are 0-51 for H.264 or HEVC, 0-255 for AV1, or -1 (not used).</p>
</dd>
<dt>profile</dt><dd><p>Encoding profile. Valid values are 0 (Baseline), 1 (Main), 2 (High), 3 (High 10), or 4 (High 10 Intra) for H.264, 100 (Main), 101 (Main Intra), 102 (Main 10), or 103 (Main 10 Intra) for HEVC, or 200 (Main) for AV1, or -1 (Auto) for any codec.</p>
</dd>
<dt>level</dt><dd><p>Encoding level.</p>
</dd>
<dt>flags</dt><dd><p>Sets on-device frame property to XMA_FRAME_PROPERTY_FLAG_TILE_4x4 and/or XMA_FRAME_PROPERTY_FLAG_COMPRESS</p>
</dd>
<dt>params</dt><dd><p>Array of custom initialization parameters.
See the next section for the list of custom parameters supported by the encoder plugin.</p>
</dd>
<dt>param_cnt</dt><dd><p>Count of custom parameters.</p>
</dd>
</dl>
<p class="rubric">Custom Encoder Parameters</p>
<p>In addition to the standard properties, the following <a class="reference internal" href="#c.XmaParameter" title="XmaParameter"><code class="xref c c-struct docutils literal notranslate"><span class="pre">XmaParameter</span></code></a> custom parameters are supported by the encoder plugin:</p>
<dl class="simple">
<dt>&quot;slice&quot;</dt><dd><p>Slice to perform the encode.</p>
</dd>
<dt>&quot;latency_logging&quot;</dt><dd><p>When enabled, it logs latency information to XMA log.</p>
</dd>
<dt>&quot;spatial_aq&quot;</dt><dd><p>Enables or disables adaptive spatial qp.</p>
</dd>
<dt>&quot;temporal_aq&quot;</dt><dd><p>Enables or disables adaptive temporal qp.</p>
</dd>
<dt>&quot;qp_mode&quot;</dt><dd><p>Sets qp mode to auto, relative load or uniform.</p>
</dd>
<dt>&quot;tune_metrics&quot;</dt><dd><p>Sets the tuning metric to none, VQ, PSNR, SSIM or VMAF.</p>
</dd>
<dt>&quot;forced_idr&quot;</dt><dd><p>Forces insertion of an IDR.</p>
</dd>
<dt>&quot;crf&quot;</dt><dd><p>Enables or disables CRF.</p>
</dd>
<dt>&quot;expert_options&quot;</dt><dd><p>sets encoder's expert option.</p>
</dd>
<dt>&quot;device_type&quot;</dt><dd><p>For AV1 encoder selects between Type 1 and Type 2.</p>
</dd>
</dl>
<div class="line-block">
<div class="line"><br /></div>
</div>
</section>
</section>
<section id="filter-plugin-reference">
<h3><a class="toc-backref" href="#id22" role="doc-backlink">Filter Plugin Reference</a><a class="headerlink" href="#filter-plugin-reference" title="Link to this heading">¶</a></h3>
<section id="filter-interface">
<h4>Filter Interface<a class="headerlink" href="#filter-interface" title="Link to this heading">¶</a></h4>
<p>The filter plugin is based on the Filter XMA plugin type. The external interface to the filter plugin consists of the following XMA application-level functions:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#c.xma_filter_session_create" title="xma_filter_session_create"><code class="xref c c-func docutils literal notranslate"><span class="pre">xma_filter_session_create()</span></code></a></p></li>
<li><p><a class="reference internal" href="#c.xma_filter_session_set_log" title="xma_filter_session_set_log"><code class="xref c c-func docutils literal notranslate"><span class="pre">xma_filter_session_set_log()</span></code></a></p></li>
<li><p><a class="reference internal" href="#c.xma_filter_session_send_frame" title="xma_filter_session_send_frame"><code class="xref c c-func docutils literal notranslate"><span class="pre">xma_filter_session_send_frame()</span></code></a></p></li>
<li><p><a class="reference internal" href="#c.xma_filter_session_recv_frame" title="xma_filter_session_recv_frame"><code class="xref c c-func docutils literal notranslate"><span class="pre">xma_filter_session_recv_frame()</span></code></a></p></li>
<li><p><a class="reference internal" href="#c.xma_filter_session_destroy" title="xma_filter_session_destroy"><code class="xref c c-func docutils literal notranslate"><span class="pre">xma_filter_session_destroy()</span></code></a></p></li>
</ul>
<p>The declaration of these functions can be found in the /opt/amd/ama/ma35/include/xma/xmafilter.h file.</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.xma_filter_session_create">
<span class="n"><span class="pre">XmaFilterSession</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">xma_filter_session_create</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#c.XmaFilterProperties" title="XmaFilterProperties"><span class="n"><span class="pre">XmaFilterProperties</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">props</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.xma_filter_session_create" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p>This function creates a filter session and must be called prior to sending YUV frames to the filter. The hardware resources required to run the session must be previously reserved using the <a class="reference internal" href="#xrm-api-reference"><span class="std std-ref">XRM APIs</span></a> and should not be released until after the session is destroyed. The number of sessions allowed depends on several factors that include: resolution, frame rate, bit depth, and the capabilities of the hardware accelerator.</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.xma_filter_session_set_log">
<span class="n"><span class="pre">int32_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">xma_filter_session_set_log</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">XmaFilterSession</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">session</span></span>, <span class="n"><span class="pre">XmaLogHandle</span></span><span class="w"> </span><span class="n"><span class="pre">handle</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.xma_filter_session_set_log" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p>This function changes the logging from the default (set in <a class="reference internal" href="#c.xma_initialize" title="xma_initialize"><code class="xref c c-func docutils literal notranslate"><span class="pre">xma_initialize()</span></code></a>) to some other logging.</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.xma_filter_session_send_frame">
<span class="n"><span class="pre">int32_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">xma_filter_session_send_frame</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">XmaFilterSession</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">session</span></span>, <a class="reference internal" href="#c.XmaFrame" title="XmaFrame"><span class="n"><span class="pre">XmaFrame</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">frame</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.xma_filter_session_send_frame" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p>This function sends YUV frames to the filter module in hardware. After sending a frame, the application can take further action depending upon the return value from this API.</p>
<p>If this function returns XMA_SUCCESS, then the application can proceed to recieve a frame from this filter.</p>
<p>If this function returns XMA_TRY_AGAIN, it means the input frame has not been consumed and needs to re-send the same input frame after calling receive frame.</p>
<p>Once the application sends all input frames to the filter module, it should continue sending null frames until all the frames have been flushed out from the filter.</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.xma_filter_session_recv_frame">
<span class="n"><span class="pre">int32_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">xma_filter_session_recv_frame</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">XmaFilterSession</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">session</span></span>, <a class="reference internal" href="#c.XmaFrame" title="XmaFrame"><span class="n"><span class="pre">XmaFrame</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">frame</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.xma_filter_session_recv_frame" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p>This function is called after calling the function <a class="reference internal" href="#c.xma_filter_session_send_frame" title="xma_filter_session_send_frame"><code class="xref c c-func docutils literal notranslate"><span class="pre">xma_filter_session_send_frame()</span></code></a>.</p>
<p>If this function returns XMA_SUCCESS, then the &quot;dummy&quot; frame provided by the application has been filled in and can be sent to the next plugin.</p>
<p>If this function returns XMA_RESEND_AND_RECV, then no frames have been sent to the filter for processing. The XmaFrame is untouched and may be reused or released.
If this function returns XMA_TRY_AGAIN, then frames have been sent and are currently being processed, but are not yet ready. The c:struct:<cite>XmaFrame</cite> is untouched and may be reused or released.
If this function returns XMA_EOS, then all frames have been processed. The c:struct:<cite>XmaFrame</cite> is untouched and must be released.</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.xma_filter_session_destroy">
<span class="n"><span class="pre">int32_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">xma_filter_session_destroy</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">XmaFilterSession</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">session</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.xma_filter_session_destroy" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p>This function destroys the filter session that was previously created with the <a class="reference internal" href="#c.xma_filter_session_create" title="xma_filter_session_create"><code class="xref c c-func docutils literal notranslate"><span class="pre">xma_filter_session_create()</span></code></a> function.</p>
</section>
<section id="filter-properties">
<h4>Filter Properties<a class="headerlink" href="#filter-properties" title="Link to this heading">¶</a></h4>
<p>The AMD AMA Video SDK filter is configured using a combination of standard XMA filter properties, standard XMA filter input and output properties and custom filter parameters, all of which are specified using <a class="reference internal" href="#c.XmaFilterProperties" title="XmaFilterProperties"><code class="xref c c-struct docutils literal notranslate"><span class="pre">XmaFilterProperties</span></code></a> and <a class="reference internal" href="#c.XmaFilterPortProperties" title="XmaFilterPortProperties"><code class="xref c c-struct docutils literal notranslate"><span class="pre">XmaFilterPortProperties</span></code></a> data structures.</p>
<dl class="c struct">
<dt class="sig sig-object c" id="c.XmaFilterProperties">
<span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">XmaFilterProperties</span></span></span><a class="headerlink" href="#c.XmaFilterProperties" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p>This data structure is used to configure the filter function. The declaration of <a class="reference internal" href="#c.XmaFilterProperties" title="XmaFilterProperties"><code class="xref c c-struct docutils literal notranslate"><span class="pre">XmaFilterProperties</span></code></a> can be found in the /opt/amd/ama/ma35/include/xma/xmafilter.h file.</p>
<dl class="c struct">
<dt class="sig sig-object c" id="c.XmaFilterPortProperties">
<span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">XmaFilterPortProperties</span></span></span><a class="headerlink" href="#c.XmaFilterPortProperties" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p>This data structure is used to configure the input and output of the filter. The <a class="reference internal" href="#c.XmaFilterProperties" title="XmaFilterProperties"><code class="xref c c-struct docutils literal notranslate"><span class="pre">XmaFilterProperties</span></code></a> data structure contains one <a class="reference internal" href="#c.XmaFilterPortProperties" title="XmaFilterPortProperties"><code class="xref c c-struct docutils literal notranslate"><span class="pre">XmaFilterPortProperties</span></code></a> for the filter input and one <a class="reference internal" href="#c.XmaFilterPortProperties" title="XmaFilterPortProperties"><code class="xref c c-struct docutils literal notranslate"><span class="pre">XmaFilterPortProperties</span></code></a> for the output output. The declaration of <a class="reference internal" href="#c.XmaFilterPortProperties" title="XmaFilterPortProperties"><code class="xref c c-struct docutils literal notranslate"><span class="pre">XmaFilterPortProperties</span></code></a> can be found in the /opt/amd/ama/ma35/include/xma/xmafilter.h file.</p>
<p class="rubric">Standard XMA Filter Properties</p>
<p>When using the filter plugin, the following members of the <a class="reference internal" href="#c.XmaFilterPortProperties" title="XmaFilterPortProperties"><code class="xref c c-struct docutils literal notranslate"><span class="pre">XmaFilterPortProperties</span></code></a> data structure must be set by the application:</p>
<dl class="simple">
<dt>hwfilter_type</dt><dd><p>Sets the direction of stream entry to <code class="xref c c-macro docutils literal notranslate"><span class="pre">XMA_UPLOAD_FILTER_TYPE</span></code> or <code class="xref c c-macro docutils literal notranslate"><span class="pre">XMA_DOWNLOAD_FILTER_TYPE</span></code>.</p>
</dd>
<dt>params</dt><dd><p>Array of custom initialization parameters.
See the next section for the list of custom parameters supported by the filter plugin.</p>
</dd>
<dt>param_cnt</dt><dd><p>Count of custom parameters.</p>
</dd>
<dt>input</dt><dd><p>Input property of type <a class="reference internal" href="#c.XmaFilterPortProperties" title="XmaFilterPortProperties"><code class="xref c c-struct docutils literal notranslate"><span class="pre">XmaFilterPortProperties</span></code></a></p>
</dd>
<dt>output</dt><dd><p>Output property of type <a class="reference internal" href="#c.XmaFilterPortProperties" title="XmaFilterPortProperties"><code class="xref c c-struct docutils literal notranslate"><span class="pre">XmaFilterPortProperties</span></code></a></p>
</dd>
</dl>
<p class="rubric">Standard XMA Filter Port Properties</p>
<p>When configuring the filter input or output, the following members of the <a class="reference internal" href="#c.XmaFilterPortProperties" title="XmaFilterPortProperties"><code class="xref c c-struct docutils literal notranslate"><span class="pre">XmaFilterPortProperties</span></code></a> data structure must be set by the application:</p>
<dl class="simple">
<dt>format</dt><dd><p>Input video format.
Must be set to <code class="xref c c-macro docutils literal notranslate"><span class="pre">XMA_VPE_FMT_TYPE</span></code>.</p>
</dd>
<dt>sw_format</dt><dd><p>Device side input video format. Valid values are XMA_NV12_FMT_TYPE, XMA_P010LE_FMT_TYPE, XMA_PACKED10_FMT_TYPE, XMA_RGB24_FMT_TYPE, XMA_YUV420P_FMT_TYPE, XMA_YUV420P10LE_FMT_TYPE.</p>
</dd>
<dt>width</dt><dd><p>Width in pixels of incoming video stream/data.
Valid values are even integers between 128 and 3840
Portrait mode is supported.</p>
</dd>
<dt>height</dt><dd><p>Height in pixels of incoming video stream/data.
Valid values are even integers between 128 and 2160.</p>
</dd>
<dt>framerate</dt><dd><p>Framerate data structure specifying frames per second.</p>
</dd>
<dt>flags</dt><dd><p>Sets on-device frame property to <code class="xref c c-macro docutils literal notranslate"><span class="pre">XMA_FRAME_PROPERTY_FLAG_TILE_4x4</span></code> or <code class="xref c c-macro docutils literal notranslate"><span class="pre">XMA_FRAME_PROPERTY_FLAG_COMPRESS</span></code></p>
</dd>
<dt>framerate</dt><dd><p>Framerate data structure specifying frame rate per second.</p>
</dd>
</dl>
<p class="rubric">Custom Filter Parameters</p>
<p>In addition to the standard properties, the following <a class="reference internal" href="#c.XmaParameter" title="XmaParameter"><code class="xref c c-struct docutils literal notranslate"><span class="pre">XmaParameter</span></code></a> custom parameters are supported by the filter plugin:</p>
<dl class="simple">
<dt>&quot;latency_logging&quot;</dt><dd><p>When enabled, it logs latency information to XMA log.</p>
</dd>
</dl>
<div class="line-block">
<div class="line"><br /></div>
</div>
</section>
</section>
<section id="ultra-low-latency-considerations">
<h3><a class="toc-backref" href="#id23" role="doc-backlink">Ultra Low Latency Considerations</a><a class="headerlink" href="#ultra-low-latency-considerations" title="Link to this heading">¶</a></h3>
<section id="decoder-low-latency-mode">
<h4>Decoder Low Latency Mode<a class="headerlink" href="#decoder-low-latency-mode" title="Link to this heading">¶</a></h4>
<p>To enable low latency in the decoder, add a <a class="reference internal" href="#c.XmaParameter" title="XmaParameter"><code class="xref c c-struct docutils literal notranslate"><span class="pre">XmaParameter</span></code></a> with the name <cite>low_latency</cite>, of type <code class="docutils literal notranslate"><span class="pre">XMA_INT32</span></code>, and value of 1. After each frame is sent to the decoder, the decoder will return <code class="xref c c-macro docutils literal notranslate"><span class="pre">XMA_SUCCESS</span></code>. The application can immediately call <a class="reference internal" href="#c.xma_dec_session_recv_frame" title="xma_dec_session_recv_frame"><code class="xref c c-func docutils literal notranslate"><span class="pre">xma_dec_session_recv_frame()</span></code></a>. It will return either <code class="xref c c-macro docutils literal notranslate"><span class="pre">XMA_SUCCESS</span></code> (indicating a frame has been returned), <code class="xref c c-macro docutils literal notranslate"><span class="pre">XMA_EOS</span></code> (indicating the end of stream has been reached), or <code class="xref c c-macro docutils literal notranslate"><span class="pre">XMA_RESEND_AND_RECV</span></code> (indicating the frame is still being processed and <a class="reference internal" href="#c.xma_dec_session_recv_frame" title="xma_dec_session_recv_frame"><code class="xref c c-func docutils literal notranslate"><span class="pre">xma_dec_session_recv_frame()</span></code></a> must keep being called until it is ready).</p>
</section>
<section id="encoder-ultra-low-latency-mode">
<h4>Encoder Ultra Low Latency Mode<a class="headerlink" href="#encoder-ultra-low-latency-mode" title="Link to this heading">¶</a></h4>
<p>To enable Ultra Low Latency in the encoder, set <a class="reference internal" href="#c.XmaEncoderProperties" title="XmaEncoderProperties"><code class="xref c c-struct docutils literal notranslate"><span class="pre">XmaEncoderProperties</span></code></a>.lookahead_depth = 0. After each frame is sent to the encoder, the encoder will return <code class="xref c c-macro docutils literal notranslate"><span class="pre">XMA_SUCCESS</span></code>. The application can immediately call <a class="reference internal" href="#c.xma_enc_session_recv_data" title="xma_enc_session_recv_data"><code class="xref c c-func docutils literal notranslate"><span class="pre">xma_enc_session_recv_data()</span></code></a>. It will return either <code class="xref c c-macro docutils literal notranslate"><span class="pre">XMA_SUCCESS</span></code> (indicating a frame has been returned), <code class="xref c c-macro docutils literal notranslate"><span class="pre">XMA_EOS</span></code> (indicating the end of stream has been reached), or <code class="xref c c-macro docutils literal notranslate"><span class="pre">XMA_RESEND_AND_RECV</span></code> (indicating the frame is still being processed and <a class="reference internal" href="#c.xma_enc_session_recv_data" title="xma_enc_session_recv_data"><code class="xref c c-func docutils literal notranslate"><span class="pre">xma_enc_session_recv_data()</span></code></a> must keep being called until it is ready).</p>
</section>
</section>
</section>
<section id="id3">
<h2><a class="toc-backref" href="#id24" role="doc-backlink">1.1 SDK API</a><a class="headerlink" href="#id3" title="Link to this heading">¶</a></h2>
<p>The following subsections delineate 1.1 API improvements over 1.0. To use 1.1 APIs, set <code class="docutils literal notranslate"><span class="pre">XMA_API_VERSION</span></code> parameter to <code class="docutils literal notranslate"><span class="pre">XMA_API_VERSION_1_1</span></code>. (See <a class="reference internal" href="#id2"><span class="std std-ref">here</span></a> for how to do this.)</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>SDK 1.1.1 is not backward ABI compatible with SDK 1.0. This implies that 1.0 applications need to be migrated to 1.1.1 SDK, manually.</p>
</div>
<section id="sideband-data">
<h3><a class="toc-backref" href="#id25" role="doc-backlink">Sideband Data</a><a class="headerlink" href="#sideband-data" title="Link to this heading">¶</a></h3>
<p>The main difference between SDK 1.1 and 1.0 are:</p>
<ol class="arabic">
<li><p>v1.0 only allowed 1 sideband data of each type, adding another would replace the first. v1.1 allows multiple of each type. New functions are added to access/modify the sideband data.</p></li>
<li><p>HDR10 sideband data type are deprecated and replaced with several different SEI sideband data types</p></li>
<li><p>Applications can define their own sideband data types and add the sideband data to frames. Filters will pass this sideband data downstream. Currently, only frames can have sideband data.</p></li>
<li><p>All sideband data (both predefined and user defined) can have metadata. Metadata is <code class="docutils literal notranslate"><span class="pre">XmaParameters</span></code> attached to sideband data used for adding additional information about a sideband data buffer to a sideband data. Each sideband data can have only one sideband metadata with a given name. If an application tries to add new metadata to a sidedata and a metadata with the same name already exists, the original metadata will be deleted and replaced by the new metadata. Metadata exists solely on the host.</p></li>
<li><p>Added sidedata functions are:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-</span> <span class="n">xma_side_data_get_metadata</span><span class="p">():</span> <span class="n">Gets</span> <span class="n">the</span> <span class="n">value</span> <span class="n">of</span> <span class="n">sideband</span> <span class="n">metadata</span><span class="o">.</span>
<span class="o">-</span> <span class="n">xma_side_data_set_metadata</span><span class="p">():</span> <span class="n">Adds</span><span class="o">/</span><span class="n">replaces</span> <span class="n">sideband</span> <span class="n">metadata</span> <span class="n">to</span> <span class="n">sideband</span> <span class="n">data</span><span class="o">.</span>
<span class="o">-</span> <span class="n">xma_frame_get_first_side_data</span><span class="p">():</span> <span class="n">Get</span> <span class="n">the</span> <span class="n">first</span> <span class="n">sidedata</span> <span class="n">of</span> <span class="nb">any</span> <span class="nb">type</span> <span class="n">that</span> <span class="ow">is</span> <span class="n">attached</span> <span class="n">to</span> <span class="n">a</span> <span class="n">given</span> <span class="n">frame</span><span class="o">.</span>
<span class="o">-</span> <span class="n">xma_frame_get_next_side_data</span><span class="p">():</span> <span class="n">Get</span> <span class="n">the</span> <span class="nb">next</span> <span class="n">sidedata</span> <span class="n">of</span> <span class="nb">any</span> <span class="nb">type</span> <span class="n">that</span> <span class="ow">is</span> <span class="n">attached</span> <span class="n">to</span> <span class="n">a</span> <span class="n">given</span> <span class="n">frame</span><span class="o">.</span>
<span class="o">-</span> <span class="n">xma_frame_get_next_side_data_of_type</span><span class="p">():</span> <span class="n">Get</span> <span class="n">the</span> <span class="nb">next</span> <span class="n">sidedata</span> <span class="n">of</span> <span class="n">a</span> <span class="n">given</span> <span class="nb">type</span> <span class="n">that</span> <span class="ow">is</span> <span class="n">attached</span> <span class="n">to</span> <span class="n">a</span> <span class="n">given</span> <span class="n">frame</span><span class="o">.</span>
</pre></div>
</div>
</li>
<li><p>Modified sidedata functions are:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-</span> <span class="n">xma_frame_get_side_data</span><span class="p">():</span> <span class="n">In</span> <span class="n">v1</span><span class="mf">.0</span> <span class="n">it</span> <span class="n">will</span> <span class="k">continue</span> <span class="n">to</span> <span class="n">get</span> <span class="n">the</span> <span class="n">sidedata</span> <span class="n">of</span> <span class="n">a</span> <span class="n">given</span> <span class="nb">type</span> <span class="kn">from</span> <span class="nn">a</span> <span class="n">given</span> <span class="n">frame</span><span class="o">.</span> <span class="n">In</span> <span class="n">v1</span><span class="mf">.1</span> <span class="n">it</span> <span class="n">will</span> <span class="n">get</span> <span class="n">the</span> <span class="n">first</span> <span class="n">sidedata</span> <span class="n">of</span> <span class="n">a</span> <span class="n">given</span> <span class="nb">type</span> <span class="kn">from</span> <span class="nn">a</span> <span class="n">given</span> <span class="n">frame</span><span class="o">.</span>
<span class="o">-</span> <span class="n">xma_frame_remove_side_data_type</span><span class="p">():</span> <span class="n">In</span> <span class="n">v1</span><span class="mf">.0</span> <span class="n">it</span> <span class="n">will</span> <span class="k">continue</span> <span class="n">to</span> <span class="n">remove</span> <span class="n">the</span> <span class="n">sidedata</span> <span class="n">of</span> <span class="n">a</span> <span class="n">given</span> <span class="nb">type</span><span class="o">.</span> <span class="n">In</span> <span class="n">v1</span><span class="mf">.1</span> <span class="n">it</span> <span class="n">will</span> <span class="n">remove</span> <span class="nb">all</span> <span class="n">sidedata</span> <span class="n">of</span> <span class="n">a</span> <span class="n">given</span> <span class="nb">type</span><span class="o">.</span>
</pre></div>
</div>
</li>
<li><p>Deprecated sidedata functions are:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-</span> <span class="n">xma_side_data_read</span><span class="p">():</span> <span class="n">In</span> <span class="n">v1</span><span class="mf">.0</span> <span class="n">it</span> <span class="n">copies</span> <span class="n">the</span> <span class="n">contents</span> <span class="n">of</span> <span class="n">the</span> <span class="n">sidedata</span> <span class="n">buffer</span> <span class="kn">from</span> <span class="nn">the</span> <span class="n">device</span> <span class="n">to</span> <span class="n">the</span> <span class="n">host</span><span class="o">.</span>
</pre></div>
</div>
</li>
</ol>
</section>
<section id="multithreading">
<h3><a class="toc-backref" href="#id26" role="doc-backlink">Multithreading</a><a class="headerlink" href="#multithreading" title="Link to this heading">¶</a></h3>
<ol class="arabic">
<li><p>In the decoder, 2 <code class="docutils literal notranslate"><span class="pre">XmaParameter</span></code> parameters are added:<code class="docutils literal notranslate"><span class="pre">XMA_DEC_PARAM_THREADS</span></code> and <code class="docutils literal notranslate"><span class="pre">XMA_DEC_PARAM_WAIT</span></code>. If <code class="docutils literal notranslate"><span class="pre">XMA_DEC_PARAM_THREADS</span></code> is set to 1, a background thread is deployed to improve performance. Note that <code class="docutils literal notranslate"><span class="pre">XMA_DEC_PARAM_THREADS</span></code> is 0 by default. If the application is using different threads to send and receive data from the decoder, the parameter <code class="docutils literal notranslate"><span class="pre">XMA_DEC_PARAM_WAIT</span></code> will improve CPU utilization on the host. <code class="docutils literal notranslate"><span class="pre">XMA_DEC_PARAM_WAIT</span></code> is only available if <code class="docutils literal notranslate"><span class="pre">XMA_DEC_PARAM_THREADS</span></code> is 1. <code class="docutils literal notranslate"><span class="pre">XMA_DEC_PARAM_WAIT</span></code> is 0 by default.</p></li>
<li><p>Similarly, in the encoder, 2 <code class="docutils literal notranslate"><span class="pre">XmaParameter</span></code> parameters are added: <code class="docutils literal notranslate"><span class="pre">XMA_ENC_PARAM_THREADS</span></code> and <code class="docutils literal notranslate"><span class="pre">XMA_ENC_PARAM_WAIT</span></code>. These behave the same as in the decoder.</p></li>
<li><p>The encoder calling order of send and receive has changed to be more in line with the decoder and scaler.</p>
<blockquote>
<div><ul class="simple">
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">xma_enc_session_send_frame()</span></code> return values and expected application behavior:</dt><dd><ul>
<li><p><code class="docutils literal notranslate"><span class="pre">XMA_SUCCESS</span></code>: A frame is successfully sent to the encoder, regardless of if any data can be pulled from the encoder. The application should try calling <code class="docutils literal notranslate"><span class="pre">xma_enc_session_recv_data()</span></code> and proceed depending on the return value from <code class="docutils literal notranslate"><span class="pre">xma_enc_session_recv_data()</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">XMA_TRY_AGAIN</span></code>: The encoder's internal buffers are currently full. The application should try calling <code class="docutils literal notranslate"><span class="pre">xma_enc_session_recv_data()</span></code> and proceed according to it's return code. The next time <code class="docutils literal notranslate"><span class="pre">xma_enc_session_send_frame()</span></code> is called, send the same frame as was last sent, as it has not yet been processed. <code class="docutils literal notranslate"><span class="pre">XMA_TRY_AGAIN</span></code> will only be returned if <code class="docutils literal notranslate"><span class="pre">XMA_ENC_PARAM_WAIT</span></code> is 0.</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">xma_enc_session_recv_data()</span></code> return values and expected application behavior:</dt><dd><ul>
<li><p><code class="docutils literal notranslate"><span class="pre">XMA_SUCCESS</span></code>: Compressed data was returned and <code class="docutils literal notranslate"><span class="pre">xma_enc_session_send_frame()</span></code> can be called.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">XMA_RESEND_AND_RECV</span></code>: No compressed data is ready and the application should call <code class="docutils literal notranslate"><span class="pre">xma_enc_session_send_frame()</span></code>. Multiple loops of <code class="docutils literal notranslate"><span class="pre">xma_enc_session_send_frame()</span></code> returning <code class="docutils literal notranslate"><span class="pre">XMA_TRY_AGAIN</span></code> and <code class="docutils literal notranslate"><span class="pre">xma_enc_session_recv_data()</span></code> returning <code class="docutils literal notranslate"><span class="pre">XMA_RESEND_AND_RECV</span></code> may occur if internal buffers are full but no compressed data is ready. Continue looping until one of the functions returns a different value. <code class="docutils literal notranslate"><span class="pre">XMA_RESEND_AND_RECV</span></code> will only be returned if <code class="docutils literal notranslate"><span class="pre">XMA_ENC_PARAM_WAIT</span></code> is 0.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">XMA_EOS</span></code>: The end of the stream has been reached.</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
</li>
</ol>
</section>
<section id="logging">
<h3><a class="toc-backref" href="#id27" role="doc-backlink">Logging</a><a class="headerlink" href="#logging" title="Link to this heading">¶</a></h3>
<p>XMA logging has been extended to be able to optionally output AMA logging. To use it, in the call to <code class="docutils literal notranslate"><span class="pre">xma_log_init()</span></code>, set the log type to <code class="docutils literal notranslate"><span class="pre">XMA_LOG_TYPE_AMA</span></code>.</p>
</section>
<section id="upgrading">
<h3><a class="toc-backref" href="#id28" role="doc-backlink">Upgrading</a><a class="headerlink" href="#upgrading" title="Link to this heading">¶</a></h3>
<ol class="arabic">
<li><p>If any frame returned by a session needs to have sideband data added/removed, e.g. adding <code class="docutils literal notranslate"><span class="pre">XMA_FRAME_SIDE_DATA_DYN_ENC_PARAMS</span></code>, then:</p>
<ul class="simple">
<li><p>Original frame will need to be cloned, using <code class="docutils literal notranslate"><span class="pre">xma_frame_clone()</span></code></p></li>
<li><p>Original frame itself, not its clone, has to have it's reference count decremented, using <code class="docutils literal notranslate"><span class="pre">xma_frame_dec_ref()</span></code></p></li>
<li><p>Clone frame can have its sideband data added or removed using <code class="docutils literal notranslate"><span class="pre">xma_frame_add_side_data()</span></code>, <code class="docutils literal notranslate"><span class="pre">xma_frame_remove_side_data()</span></code>, or <code class="docutils literal notranslate"><span class="pre">xma_frame_remove_side_data_type()</span></code>.</p></li>
</ul>
<p>Following the above, the clone can then be passed on downstream, same as the original frame.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">xma_frame_add_side_data()</span></code> does not remove existing sideband data from a frame, prior to adding a new sideband data. Instead it will add the new sideband data in addition to the old sideband data. To remove existing sideband data, call <code class="docutils literal notranslate"><span class="pre">xma_frame_remove_side_data_type()</span></code> first.</p></li>
</ol>
</section>
</section>
<section id="xrm-api-reference">
<span id="id4"></span><h2><a class="toc-backref" href="#id29" role="doc-backlink">XRM API Reference</a><a class="headerlink" href="#xrm-api-reference" title="Link to this heading">¶</a></h2>
<p>The Xilinx® FPGA Resource Manager (XRM) library is used to manage the hardware accelerators available in the system. XRM keeps track of total system capacity for each of the compute units such as the decoder, scaler, and encoder.</p>
<p>The XRM library includes a daemon, a command line tool and a C application programming interface (API). Using the library API, external applications can communicate with the XRM daemon and perform actions such as reserving, allocating and releasing resources.</p>
<p>More details on the XRM command line tool (xrmadm) and the XRM daemon (xrmd) can be found in the <a class="reference internal" href="managing_compute_resources.html#xrm-reference"><span class="std std-ref">XRM Reference Guide</span></a> section of the documentation.</p>
<p>The XRM C APIs are defined in /opt/amd/ama/ma35/include/xrm/xrm.h.</p>
<section id="decoder-resource-reservation-with-xrm">
<h3><a class="toc-backref" href="#id30" role="doc-backlink">Decoder Resource Reservation with XRM</a><a class="headerlink" href="#decoder-resource-reservation-with-xrm" title="Link to this heading">¶</a></h3>
<p>The decoder plugin uses the following function to reserve and release resources:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#c.xrm_dec_reserve" title="xrm_dec_reserve"><code class="xref c c-func docutils literal notranslate"><span class="pre">xrm_dec_reserve()</span></code></a></p></li>
<li><p><a class="reference internal" href="#c.xrm_dec_release" title="xrm_dec_release"><code class="xref c c-func docutils literal notranslate"><span class="pre">xrm_dec_release()</span></code></a></p></li>
</ul>
<p>The declaration of these functions can be found in the /opt/amd/ama/ma35/include/xrm_interface/xrm_dec_interface.h file.</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.xrm_dec_reserve">
<span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">xrm_dec_reserve</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">XrmDecodeContext</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">xrm_dec_ctx</span></span>, <span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="n"><span class="pre">dev_index</span></span>, <span class="n"><span class="pre">XrmInterfaceProperties</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">xrm_props</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.xrm_dec_reserve" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p>This function checks and allocates the necessary xrm resources given the relevant decoder parameters</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.xrm_dec_release">
<span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">xrm_dec_release</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">XrmDecodeContext</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">xrm_dec_ctx</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.xrm_dec_release" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p>This function releases the xrm resources which were allocated.</p>
<p>XrmDecodeContext is defined in /opt/amd/ama/ma35/include/xrm_interface/xrm_dec_interface.h file.</p>
</section>
<section id="encoder-resource-reservation-with-xrm">
<h3><a class="toc-backref" href="#id31" role="doc-backlink">Encoder Resource Reservation with XRM</a><a class="headerlink" href="#encoder-resource-reservation-with-xrm" title="Link to this heading">¶</a></h3>
<p>The encoder plugin uses the following function to reserve and release resources:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#c.xrm_enc_reserve" title="xrm_enc_reserve"><code class="xref c c-func docutils literal notranslate"><span class="pre">xrm_enc_reserve()</span></code></a></p></li>
<li><p><a class="reference internal" href="#c.xrm_enc_release" title="xrm_enc_release"><code class="xref c c-func docutils literal notranslate"><span class="pre">xrm_enc_release()</span></code></a></p></li>
</ul>
<p>The declaration of these functions can be found in the /opt/amd/ama/ma35/include/xrm_interface/xrm_enc_interface.h file.</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.xrm_enc_reserve">
<span class="n"><span class="pre">int32_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">xrm_enc_reserve</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">XrmEncodeContext</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">xrm_enc_ctx</span></span>, <span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="n"><span class="pre">dev_index</span></span>, <span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="n"><span class="pre">slice_id</span></span>, <span class="kt"><span class="pre">bool</span></span><span class="w"> </span><span class="n"><span class="pre">is_xav1</span></span>, <span class="kt"><span class="pre">bool</span></span><span class="w"> </span><span class="n"><span class="pre">is_ull</span></span>, <span class="n"><span class="pre">XrmInterfaceProperties</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">xrm_props</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.xrm_enc_reserve" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p>This function checks and allocates the necessary xrm resources given the relevant encoder parameters</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.xrm_enc_release">
<span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">xrm_enc_release</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">XrmEncodeContext</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">xrm_enc_ctx</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.xrm_enc_release" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p>This function releases the xrm resources which were allocated.</p>
<p>XrmEncodeContext is defined in /opt/amd/ama/ma35/include/xrm_interface/xrm_enc_interface.h file.</p>
</section>
<section id="scaler-resource-reservation-with-xrm">
<h3><a class="toc-backref" href="#id32" role="doc-backlink">Scaler Resource Reservation with XRM</a><a class="headerlink" href="#scaler-resource-reservation-with-xrm" title="Link to this heading">¶</a></h3>
<p>The scaler plugin uses the following function to reserve and release resources:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#c.xrm_scale_reserve" title="xrm_scale_reserve"><code class="xref c c-func docutils literal notranslate"><span class="pre">xrm_scale_reserve()</span></code></a></p></li>
<li><p><a class="reference internal" href="#c.xrm_scale_release" title="xrm_scale_release"><code class="xref c c-func docutils literal notranslate"><span class="pre">xrm_scale_release()</span></code></a></p></li>
</ul>
<p>The declaration of these functions can be found in the /opt/amd/ama/ma35/include/xrm_interface/xrm_scale_interface.h file.</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.xrm_scale_reserve">
<span class="n"><span class="pre">int32_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">xrm_scale_reserve</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">XrmScaleContext</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">scaler_xrm_ctx</span></span>, <span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="n"><span class="pre">dev_index</span></span>, <span class="n"><span class="pre">XrmInterfaceProperties</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">input_props</span></span>, <span class="n"><span class="pre">XrmInterfaceProperties</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">output_props</span></span>, <span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="n"><span class="pre">num_outputs</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.xrm_scale_reserve" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p>This function checks and allocates the necessary xrm resources given the relevant encoder parameters</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.xrm_scale_release">
<span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">xrm_scale_release</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">XrmScaleContext</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">scaler_xrm_ctx</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.xrm_scale_release" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p>This function releases the xrm resources which were allocated.</p>
<p>XrmScaleContext is defined in /opt/amd/ama/ma35/include/xrm_interface/xrm_scale_interface.h file.</p>
</section>
<section id="building-sample-examples">
<h3><a class="toc-backref" href="#id33" role="doc-backlink">Building Sample Examples</a><a class="headerlink" href="#building-sample-examples" title="Link to this heading">¶</a></h3>
<p>To build the included sample applications, follow the steps below:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">amd</span><span class="o">/</span><span class="n">ama</span><span class="o">/</span><span class="n">ma35</span><span class="o">/</span><span class="n">examples</span><span class="o">/</span><span class="n">xma</span><span class="o">/</span>
<span class="n">chmod</span> <span class="o">-</span><span class="n">R</span> <span class="mi">777</span> <span class="o">.</span>
<span class="n">mkdir</span> <span class="n">build</span> <span class="o">&amp;&amp;</span> <span class="n">cd</span> <span class="n">build</span>
<span class="n">cmake</span> <span class="o">..</span>
<span class="n">make</span> <span class="o">-</span><span class="n">j</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
</section>
</section>
</section>


           </div>
          </div>
          
				  
				  <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="managing_compute_resources.html" class="btn btn-neutral float-left" title="Managing Video Acceleration Compute Resources" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="card_management.html" class="btn btn-neutral float-right" title="Card Management" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022-2024, Advanced Micro Devices, Inc.
      <span class="lastupdated">Last updated on September 23, 2024.
      </span></p>
  </div>



										<div class="aem-Grid aem-Grid--16">
											<div class="aem-GridColumn aem-GridColumn--xxxlarge--none aem-GridColumn--xsmall--16 aem-GridColumn--offset--xsmall--0 aem-GridColumn--xlarge--none aem-GridColumn--xxlarge--none aem-GridColumn--default--none aem-GridColumn--offset--large--1 aem-GridColumn--xlarge--12 aem-GridColumn--offset--default--0 aem-GridColumn--xxlarge--10 aem-GridColumn--offset--xlarge--2 aem-GridColumn--offset--xxlarge--3 aem-GridColumn--offset--xxxlarge--4 aem-GridColumn--xsmall--none aem-GridColumn--large--none aem-GridColumn aem-GridColumn--large--14 aem-GridColumn--xxxlarge--8 aem-GridColumn--default--16">
												<div class="container-fluid sub-footer">

													                    <div class="row">
                        <div class="col-xs-24">
                          <p><a target="_blank" href="https://www.amd.com/en/corporate/copyright">Terms and Conditions</a> | <a target="_blank" href="https://www.amd.com/en/corporate/privacy">Privacy</a> | <a target="_blank" href="https://www.amd.com/en/corporate/cookies">Cookie Policy</a> | <a target="_blank" href="https://www.amd.com/en/corporate/trademarks">Trademarks</a> | <a target="_blank" href="https://www.amd.com/system/files/documents/statement-human-trafficking-forced-labor.pdf">Statement on Forced Labor</a> | <a target="_blank" href="https://www.amd.com/en/corporate/competition">Fair and Open Competition</a> | <a target="_blank" href="https://www.amd.com/system/files/documents/amd-uk-tax-strategy.pdf">UK Tax Strategy</a> | <a target="_blank" href="https://docs.xilinx.com/v/u/9x6YvZKuWyhJId7y7RQQKA">Inclusive Terminology</a> | <a href="#cookiessettings" class="ot-sdk-show-settings">Cookies Settings</a></p>
                        </div>
                    </div>
												</div>
											</div>
										</div>
										
</br>


  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
 <script type="text/javascript">
    $(document).ready(function() {
        $(".toggle > *").hide();
        $(".toggle .header").show();
        $(".toggle .header").click(function() {
            $(this).parent().children().not(".header").toggle(400);
            $(this).parent().children(".header").toggleClass("open");
        })
    });
</script>


</body>
</html>