<!DOCTYPE html>
<html class="writer-html5" lang="English" >
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
<!-- OneTrust Cookies Consent Notice start for amd.github.io -->
<script src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js" data-document-language="true" type="text/javascript" charset="UTF-8" data-domain-script="cb638ba1-8bc4-44a0-9338-632d4dc19be6" ></script>
<script type="text/javascript">
function OptanonWrapper() { }
</script>
<!-- OneTrust Cookies Consent Notice end for amd.github.io -->
<!-- Google Tag Manager -->
<script type="text/plain" class="optanon-category-C0002">(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-5RHQV7');</script>
<!-- End Google Tag Manager -->
  <title>XMA Examples for the AMD AMA Video SDK &mdash; AMD AMA 1.0 documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/_static/custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../_static/documentation_options.js?v=cd5f4460"></script>
        <script src="../../_static/doctools.js?v=888ff710"></script>
        <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Specs and Features of the AMD AMA Video SDK" href="../../specs_and_features.html" />
    <link rel="prev" title="GStreamer ABR Ladder Application" href="../gstreamer/xabrladder.html" /> 
</head>

<body class="wy-body-for-nav">

<!-- Google Tag Manager -->
<noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5RHQV7" height="0" width="0" style="display:none;visibility:hidden" class="optanon-category-C0002"></iframe></noscript>
<!-- End Google Tag Manager --> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
            <a href="../../index.html" class="icon icon-home"> AMD AMA
          </a>
              <div class="version">
                1.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Get Started</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../release_notes.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started_on_prem.html">On Premises</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../virtualization.html">Virtualization</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../examples.html">Tutorials and Examples</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../ffmpeg/tutorials.html">FFmpeg Introductory Tutorials</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ffmpeg/quality_analysis.html">FFmpeg Video Quality</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ffmpeg/filters.html">FFmpeg Software Filters</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gstreamer/tutorials.html">Gstreamer Introductory Tutorials</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gstreamer/filters.html">Gstreamer Software Filters</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gstreamer/xcompositor.html">Gstreamer Compositor</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gstreamer/xabrladder.html">Gstreamer ABR Ladder</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">XMA C-Based Applications</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#environment-setup">Environment Setup</a></li>
<li class="toctree-l3"><a class="reference internal" href="#xma-decoder-app">XMA Decoder App</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#decoder-test-instructions">Decoder Test Instructions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#xma-encoder-app">XMA Encoder App</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#encoder-test-instructions">Encoder Test Instructions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#xma-scaler-app">XMA Scaler App</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#scaler-test-instructions">Scaler Test Instructions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#xma-transcoder-app">XMA Transcoder App</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#transcoder-test-instructions">Transcoder Test Instructions</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Reference Guides</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../specs_and_features.html">Specs and Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../package_feed.html">Package Feed Setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../using_ffmpeg.html">Using FFmpeg</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../using_gstreamer.html">Using Gstreamer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../unified_logging.html">Unified Logging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tuning_video_quality.html">Tuning Video Quality</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tuning_pipeline_latency.html">Tuning Latency of Transcode Pipeline</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../managing_compute_resources.html">Managing Compute Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../c_apis.html">C API Programming Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../card_management.html">Card Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../migration.html">Migration Path</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Support</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../troubleshooting.html">Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/amd/ama-sdk/issues">File an issue</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Other AMA SDK Versions</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://amd.github.io/ama-sdk/">Latest Version</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Other Video Products</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/video-sdk/v3.0/index.html">U30</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: black" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">AMD AMA</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../../examples.html">Tutorials and Examples</a> &raquo;</li>
      <li>XMA Examples for the AMD AMA Video SDK</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="xma-examples-for-the-sdk">
<h1>XMA Examples for the AMD AMA Video SDK<a class="headerlink" href="#xma-examples-for-the-sdk" title="Link to this heading">Â¶</a></h1>
<nav class="contents local" id="table-of-contents">
<p class="topic-title">Table of Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#environment-setup" id="id1">Environment Setup</a></p></li>
<li><p><a class="reference internal" href="#xma-decoder-app" id="id2">XMA Decoder App</a></p></li>
<li><p><a class="reference internal" href="#xma-encoder-app" id="id3">XMA Encoder App</a></p></li>
<li><p><a class="reference internal" href="#xma-scaler-app" id="id4">XMA Scaler App</a></p></li>
<li><p><a class="reference internal" href="#xma-transcoder-app" id="id5">XMA Transcoder App</a></p></li>
</ul>
</nav>
<p>The examples in the /opt/amd/ama/ma35/bin folder illustrate how C-based applications can natively interact with AMD AMA Video SDK devices using  the XMA (Xilinx Media Accelerator) APIs. Source codes for decoder, encoder, scaler and transcoder can be found under /opt/amd/ama/ma35/examples/xma directory.</p>
<p>Detailed documentation on the AMD AMA Video SDK plugin interface and the XMA APIs can be found in the <a class="reference internal" href="../../c_apis.html"><span class="doc">C API Programming Guide</span></a> section of the documentation.</p>
<p class="rubric">Requirements</p>
<ul class="simple">
<li><p>The XMA applications has been built for and verified on a supported OS.</p></li>
<li><p>The XMA applications only work with elementary streams. Container formats such as mp4 are not supported.</p></li>
</ul>
<section id="environment-setup">
<h2><a class="toc-backref" href="#id1" role="doc-backlink">Environment Setup</a><a class="headerlink" href="#environment-setup" title="Link to this heading">Â¶</a></h2>
<ol class="arabic">
<li><p>The AMD AMA Video SDK version of FFmpeg, Gstreamer and XMA applications can be found in the /opt/amd/ama/ma35/bin folder of your system. If this folder is not present, install the required packages:</p>
<p>See <a class="reference internal" href="../../getting_started_on_prem.html"><span class="doc">On Premises</span></a></p>
</li>
<li><p>Configure the environment to use the AMD AMA Video SDK. This a mandatory step for all applications:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>source /opt/amd/ama/ma35/scripts/setup.sh
</pre></div>
</div>
</li>
</ol>
<p>The setup script exports important environment variables and ensures proper execution environment for AMD AMA Video SDK.</p>
<p>Sourcing the setup script should be performed each time you open a new terminal on your system. This is required for the environment to be correctly configured.</p>
</section>
<section id="xma-decoder-app">
<span id="xma-decoder-example"></span><h2><a class="toc-backref" href="#id2" role="doc-backlink">XMA Decoder App</a><a class="headerlink" href="#xma-decoder-app" title="Link to this heading">Â¶</a></h2>
<section id="decoder-test-instructions">
<h3>Decoder Test Instructions<a class="headerlink" href="#decoder-test-instructions" title="Link to this heading">Â¶</a></h3>
<p>The XMA decoder application supports most of the decode options supported by FFmpeg. The XMA decoder application supports only elementary H.264, HEVC and AV1 encoded bitstreams.</p>
<section id="decoder-usage">
<h4>Decoder Usage<a class="headerlink" href="#decoder-usage" title="Link to this heading">Â¶</a></h4>
<p>Running the decoder app with the <code class="docutils literal notranslate"><span class="pre">--help</span></code> option will print the complete list of options:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>ma35_decoder_app --help
encoded file and utilizes hardware acceleration to get the decoded
output.

Usage:
        ma35_decoder_app [options] -i &lt;input-file&gt; -c:v &lt;codec-type&gt;
        [codec_options] -o &lt;output-file&gt;

Arguments:
        --help                     Print this message and exit
        -log_level &lt;value&gt;         Specify the log level
        -log_location &lt;value&gt;      Log location. 0 for none,
                                   1 console (default), 2 syslog, 3 file
        -log_file &lt;file&gt;           Name and path of the log file. Default
                                   ma35_decoder_app.log
        -d &lt;device_id&gt;             Specify a device on which to run.
                                   Default: 0

Input Arguments:

        -stream_loop &lt;loop-count&gt;  Number of times to loop the input
                                   file
        -i &lt;input-file&gt;            Input file to be used

Codec Arguments:

        -c:v &lt;codec&gt;               Specify H264 or H265 decoding.
                                   (h264_ama, hevc_ama)
        -latency_logging           Enable latency logging
        -frames &lt;frame-count&gt;      Number of frames to be processed.
        -pix_fmt fmt               The output format (nv12, yuv420p,
                                   yuv420p10le, xv15) Default: nv12 8 bit,
                                   yuv420p10le 10 bit
        -o &lt;file&gt;                  File to which output is written.
</pre></div>
</div>
</section>
<section id="sample-decoder-command">
<h4>Sample Decoder Command<a class="headerlink" href="#sample-decoder-command" title="Link to this heading">Â¶</a></h4>
<p>Decode an hevc encoded file into raw N12 format:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>ma35_decoder_app -c:v hevc_ama -i &lt;INPUT&gt; -frames 100 -pix_fmt nv12 -o out1.nv12
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
</section>
</section>
</section>
<section id="xma-encoder-app">
<span id="xma-encoder-example"></span><h2><a class="toc-backref" href="#id3" role="doc-backlink">XMA Encoder App</a><a class="headerlink" href="#xma-encoder-app" title="Link to this heading">Â¶</a></h2>
<section id="encoder-test-instructions">
<h3>Encoder Test Instructions<a class="headerlink" href="#encoder-test-instructions" title="Link to this heading">Â¶</a></h3>
<p>The encoder XMA application supports most of the encoder options supported by FFmpeg. The XMA application supports variety of input pixel formats, see <a class="reference internal" href="../../using_ffmpeg.html#cmdoption-out_fmt"><code class="xref std std-option docutils literal notranslate"><span class="pre">-out_fmt</span></code></a>, and can output H.264/HEVC/AV1 encoded elementary stream formats.</p>
<section id="encoder-usage">
<h4>Encoder Usage<a class="headerlink" href="#encoder-usage" title="Link to this heading">Â¶</a></h4>
<p>Running the encoder app with the <code class="docutils literal notranslate"><span class="pre">--help</span></code> option will print the complete list of options:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>ma35_encoder_app --help
XMA Encoder App Usage:
     ./ma35_encoder_app [input options] -i input-file -c:v &lt;codec-option&gt;  [encoder options] -o &lt;output-file&gt;

Arguments:

     --help                     Print this message and exit.
     -log_level &lt;value&gt;         Log level settings, supported are 0 or
                                emergency, 1 or alert, 2 or critical, 3
                                or error, 4 or warning, 5 or notice, 6
                                or info, 7 or debug.
                                Default is 3/error
     -log_location &lt;value&gt;      Log location settings, supported are 0 or
                                none, 1 or console, 2 or syslog, 3
                                or file.
                                Default is 1/console
     -log_file &lt;log-file&gt;       Name and path of log file
                                Default is ma35_encoder_app.log
     -d &lt;device-id&gt;             Specify a device on which the
                                encoder to run.
                                Default is /dev/ama_transcoder0
     -frames &lt;frame-count&gt;      Number of frames to be processed.

Input options:

     -stream_loop &lt;loop-count&gt;  Number of times to loop the input
                                YUV file.
     -w &lt;width&gt;                 Width of YUV input.
     -h &lt;height&gt;                Height of YUV input.
     -pix_fmt &lt;pixel-format&gt;    Pixel format of the input file. It must be yuv420p,

     -i &lt;input-file&gt;            Name and path of input YUV file

Codec option:

     -c:v &lt;codec&gt;               Encoder codec to be used. Supported
                                are h264_ama, hevc_ama, av1_ama
     -device_type               When encoding to AV1, this sets which
                                AV1 encoder will be used. Supported
                                values are 1(Xilinx), 2(Vendor
                                supplied), or any

Encoder params:

     -b:v &lt;bitrate&gt;             Bitrate can be given in Kbps or Mbps
                                or bits i.e., 5000000, 5000K, 5M.
                                Default is 5Mbps
     -fps &lt;fps&gt;                 Input frame rate. Default is 30.
     -g &lt;intraperiod&gt;           Intra period. Default is 15.
     -qp &lt;qp&gt;                   QP. Supported are -1 to 51,
                                default is -1
     -min_qp &lt;qp&gt;               Minimum QP. Supported are 0 to 51,
                                default is 0.
     -max_qp &lt;qp&gt;               Maximum QP. Supported values are 0
                                to 51, default is 51.
     -spatial_aq_gain &lt;gain&gt;    Spatial AQ gain. Supported values are
                                0 to 100 or 255, default is 255.
     -temporal_aq_gain &lt;gain&gt;   Temporal AQ gain. Supported values are
                                0 to 100 or 255, default is 255.
     -temporal_aq &lt;0/1&gt;         Temporal AQ. Enable/Disable,
                                default is -1.
     -spatial_aq &lt;0/1&gt;          Spatial AQ. Enable/Disable,
                                default is -1.
     -qp_mode &lt;qp&gt;              QP Mode. Supported values 0, 1 and 2
                                default is 0.
     -control_rate &lt;rc_mode&gt;    Rate Control. Supported values -1, 0, 1, 2 and 3
                                default is -1.
     -bf &lt;frames&gt;               Number of B frames. Supported are -1
                                to 3, default is -1.
     -force_idr &lt;0/1            Supported values are 0 and 1
     -profile &lt;value&gt;           Encoder profile.
                For HEVC, supported are 100 or main, 101 or main10_intra,
                                102 or main10 , 103 or main10_intra
                                or still.
                                Default is 0/automatic
                                ENC_HEVC_MAIN - 100 or main
                                ENC_HEVC_MAIN_INTRA - 101 or main_intr
                                ENC_HEVC_MAIN_10 - 102 or main10
                                ENC_HEVC_MAIN10_INTRA - 103 or main10_intra
                For H264, supported are auto or -1, 0 or baseline,
                                1 or main, 2 or high, 3 or high10
                                4 or high10_intra, Default is auto or -1
                                ENC_H264_BASELINE - 0 or baseline.
                                ENC_H264_MAIN - 1 or main.
                                ENC_H264_HIGH - 2 or high.
                                ENC_H264_HIGH_10 - 3 or high10.
                                ENC_H264_HIGH_10_INTRA - 4 or high10_intra
     -level &lt;value&gt;             Encoder level.
                                For HEVC, supported are 10, 11, 20,
                                21, 30, 31, 40, 41, 50, 51.
                                default is 10.
                                For H264, supported are 10, 11, 12,
                                13, 20, 21, 22, 30, 31, 32, 40, 41,
                                42, 50, 51, 52.
                                Default is 0/automatic.
     -tier &lt;value&gt;              HEVC tier, supported are -1 or auto, 0 or main,
                                1 or high.
                                Default is -1/auto
     -crf &lt;value&gt;               CRF supported values are 0 and 1 i.e. enable
                                and disable
     -tune_metrics &lt;value&gt;      Tunes MPSoC H.264/HEVC encoder&#39;s video
                                quality for objective metrics, default 1.
                                Supported value from 1 to 4
     -lookahead_depth &lt;value&gt;   Lookahead depth. Supported are 0 to
                                20, default is 0.
     -latency_mode &lt;value&gt;      0 normal latency (default), 1 low
                                latency, or 2 ultra low latency
     -latency_logging           Enable latency logging
     -expert_options            Expert options
     -o &lt;file&gt;                  File to which output is written.
</pre></div>
</div>
</section>
<section id="sample-encoder-commands">
<h4>Sample Encoder Commands<a class="headerlink" href="#sample-encoder-commands" title="Link to this heading">Â¶</a></h4>
<p>H.265 encoding, ultra low latency (Consult the <a class="reference internal" href="../../tuning_pipeline_latency.html#latency-tuning"><span class="std std-ref">Tuning Latency of Transcode Pipeline</span></a> section for more details):</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>ma35_encoder_app -w 1920 -h 1080 -pix_fmt yuv420p -i &lt;INPUT&gt; -c:v hevc_ama -b:v 5M -lookahead_depth 0 -g 30 -o out0.265
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
</section>
</section>
</section>
<section id="xma-scaler-app">
<span id="xma-scaler-example"></span><h2><a class="toc-backref" href="#id4" role="doc-backlink">XMA Scaler App</a><a class="headerlink" href="#xma-scaler-app" title="Link to this heading">Â¶</a></h2>
<section id="scaler-test-instructions">
<h3>Scaler Test Instructions<a class="headerlink" href="#scaler-test-instructions" title="Link to this heading">Â¶</a></h3>
<p>The scaler XMA application supports most of the scaler options supported by FFmpeg. The XMA application supports <a class="reference internal" href="../../using_ffmpeg.html#cmdoption-out_fmt"><code class="xref std std-option docutils literal notranslate"><span class="pre">-out_fmt</span></code></a> pixel formats.</p>
<section id="scaler-usage">
<h4>Scaler Usage<a class="headerlink" href="#scaler-usage" title="Link to this heading">Â¶</a></h4>
<p>Running the scaler app with the <code class="docutils literal notranslate"><span class="pre">--help</span></code> option will print the complete list of options:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>ma35_scaler_app --help
This program ingests an nv12, yuv420p, yuv420p10le, or xv15 input
file and utilizes hardware acceleration to scale to various resolutions.

Usage:
        ma35_scaler_app [options] -w &lt;input-width&gt; -h &lt;input-height&gt; -i
        &lt;input-file&gt; [scaler_options] -w &lt;output-1-width&gt; -h
        &lt;output-1-height&gt; -o &lt;output-1-file&gt; -w ...

Arguments:
        --help                     Print this message and exit
        -log &lt;level&gt;               Specify the log level
        -log_location &lt;value&gt;      Log location. 0 for none,
                                   1 console (default), 2 syslog, 3 file
        -log_file &lt;file&gt;           Name and path of the log file. Default
                                    ma35_scaler_app.log
        -d &lt;device-id&gt;             Specify a device on which to run.
                                   Default: 0

Input Arguments:

        -stream_loop &lt;loop-count&gt;  Number of times to loop the input
                                   file
        -w &lt;width&gt;                 Specify the input&#39;s width
        -h &lt;height&gt;                Specify the input&#39;s height
        -pix_fmt &lt;pixel-format&gt;    Pixel format of the input file (nv12,
                                   xv15, yuv420p10le). Default : nv12.
        -fps &lt;frame-rate&gt;          Frame rate. Used for scaler load
                                   calculation.
        -i &lt;input-file&gt;            Input file to be used

Output Arguments:
        -rate &lt;half/full&gt;          Set the rate to half. Half rate drops
                                   frames to reduce resource usage.
                                   Default: full.
        -latency_logging           Enable latency logging
        -w &lt;width&gt;                 Specify the output&#39;s width
        -h &lt;height&gt;                Specify the output&#39;s height
        -pix_fmt &lt;pixel-format&gt;    Pixel format of the output file (nv12,
                                   xv15, yuv420p10le). Default: input fmt
        -frames &lt;frame-count&gt;      Number of frames to be processed.
        -o &lt;file&gt;                  File to which output is written.
</pre></div>
</div>
</section>
<section id="sample-scaler-command">
<h4>Sample Scaler Command<a class="headerlink" href="#sample-scaler-command" title="Link to this heading">Â¶</a></h4>
<p>Scale 1080p nv12 to 720p, 480p, 360p, and 240p nv12:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>ma35_scaler_app -pix_fmt nv12 -w 1920 -h 1080 -i &lt;INPUT&gt; \
-w 1280 -h 720  -pix_fmt nv12 -o out1.nv12 \
-w 848  -h 480  -pix_fmt nv12 -o out2.nv12 \
-w 640  -h 360  -pix_fmt nv12 -o out3.nv12 \
-w 288  -h 160  -pix_fmt nv12 -o out4.nv12
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
</section>
</section>
</section>
<section id="xma-transcoder-app">
<span id="xma-transcoder-example"></span><h2><a class="toc-backref" href="#id5" role="doc-backlink">XMA Transcoder App</a><a class="headerlink" href="#xma-transcoder-app" title="Link to this heading">Â¶</a></h2>
<section id="transcoder-test-instructions">
<h3>Transcoder Test Instructions<a class="headerlink" href="#transcoder-test-instructions" title="Link to this heading">Â¶</a></h3>
<p>The transcoder XMA application supports most of the options supported by ffmpeg. The XMA application supports only elementary H.264, HEVC and AV1 encoded stream input and outputs H.264/HEVC/AV1 encoded elementary stream.</p>
<section id="transcoder-usage">
<h4>Transcoder Usage<a class="headerlink" href="#transcoder-usage" title="Link to this heading">Â¶</a></h4>
<p>Running the transcoder app with the <code class="docutils literal notranslate"><span class="pre">--help</span></code> option will print the complete list of options:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span> ma35_transcoder_app --help
 XMA Transcoder App Usage:
        ./program [generic options] -c:v &lt;decoder codec&gt; [decoder options]  -i input-file -scaler_ma -outputs [num] [Scaler options]  -c:v &lt;encoder codec&gt; [encoder options] -o &lt;output-file&gt;  -c:v &lt;encoder codec&gt; [encoder options] -o &lt;output-file&gt;  -c:v &lt;encoder codec&gt; [encoder options] -o &lt;output-file&gt;.....

Arguments:

        --help                     Print this message and exit.
        -d &lt;device-id&gt;             Specify a device on which the
                                   transcoder to run. Default: 0
        -stream_loop &lt;loop-count&gt;  Number of times to loop the input file
        -frames &lt;frame-count&gt;      Number of input frames to be processed

Decoder options:

        -c:v &lt;codec&gt;               Decoder codec to be used. Supported
                                   are hevc_ama, h264_ama
        -latency_logging &lt;0/1&gt;     Latency logging for decoder. Default
                                   disabled
        -push-model &lt;0/1&gt;          Decoder streaming model (pull or push). Default
                                   is pull (can be faster than real-time)
        -i &lt;input-file&gt;            Name and path of input H.264/HEVC file

Scaler options:

        -scaler_ma                 Name of the ABR scaler filter
        -num-output &lt;value&gt;        Number of output files from scaler
        -out_1_width &lt;width&gt;       Width of the scaler output channel 1
        -out_1_height &lt;height&gt;     Height of the scaler output channel 1
        -out_1_rate &lt;full/half&gt;    Full of Half rate for output channel 1
        -out_2_width &lt;width&gt;       Width of the scaler output channel 2
        -out_2_height &lt;height&gt;     Height of the scaler output channel 2
        -out_2_rate &lt;full/half&gt;    Full of Half rate for output channel 2
        -out_3_width &lt;width&gt;       Width of the scaler output channel 3
        -out_3_height &lt;height&gt;     Height of the scaler output channel 3
        -out_3_rate &lt;full/half&gt;    Full of Half rate for output channel 3
        -out_4_width &lt;width&gt;       Width of the scaler output channel 4
        -out_4_height &lt;height&gt;     Height of the scaler output channel 4
        -out_4_rate &lt;full/half&gt;    Full of Half rate for output channel 4
        -out_5_width &lt;width&gt;       Width of the scaler output channel 5
        -out_5_height &lt;height&gt;     Height of the scaler output channel 5
        -out_5_rate &lt;full/half&gt;    Full of Half rate for output channel 5
        -out_6_width &lt;width&gt;       Width of the scaler output channel 6
        -out_6_height &lt;height&gt;     Height of the scaler output channel 6
        -out_6_rate &lt;full/half&gt;    Full of Half rate for output channel 6
        -out_7_width &lt;width&gt;       Width of the scaler output channel 7
        -out_7_height &lt;height&gt;     Height of the scaler output channel 7
        -out_7_rate &lt;full/half&gt;    Full of Half rate for output channel 7
        -out_8_width &lt;width&gt;       Width of the scaler output channel 8
        -out_8_height &lt;height&gt;     Height of the scaler output channel 8
        -out_8_rate &lt;full/half&gt;    Full of Half rate for output channel 8
        -latency_logging &lt;0/1&gt;     Latency logging for scaler. Default
                                   disabled
Encoder options:

        -c:v &lt;codec&gt;               Encoder codec to be used. Supported
                                   are hevc_ama, h264_ama, and av1_ama
        -device_type               When encoding to AV1, this sets which
                                   AV1 encoder will be used. Supported
                                   values are 1(Xilinx), 2(Vendor
                                   supplied), or any
        -b:v &lt;bitrate&gt;             Bitrate can be given in Kbps or Mbps
                                   or bits i.e., 5000000, 5000K, 5M.
                                   Default is 200kbps
        -fps &lt;fps&gt;                 Input frame rate. Default is 30.
        -g &lt;intraperiod&gt;           Intra period. Default is 12.
        -max-bitrate &lt;bitrate&gt;     Maximum bit rate. Supported are -1 to
                                   350000000, default is -1
        -min_qp &lt;qp&gt;               Minimum QP. Supported are 0 to 51,
                                   default is 0.
        -max_qp &lt;qp&gt;               Maximum QP. Supported values are 0
                                   to 51, default is 51.
        -spatial_aq_gain &lt;gain&gt;    Spatial AQ gain. Supported values are
                                   0 to 100 or 255, default is 255.
        -temporal_aq_gain &lt;gain&gt;   Temporal AQ gain. Supported values are
                                   0 to 100 or 255, default is 255.
        -bf &lt;frames&gt;               Number of B frames. Supported are 0
                                   to 7, default is 2.
        -force_idr &lt;0/1            Supported values are 0 and 1
        -profile &lt;value&gt;           Encoder profile.
                   For HEVC, supported are 100 or main, 101 or main10_intra,
                                   102 or main10 , 103 or main10_intra
                                   or still.
                                   Default is 0/automatic
                                   ENC_HEVC_MAIN - 100 or main
                                   ENC_HEVC_MAIN_INTRA - 101 or main_intr
                                   ENC_HEVC_MAIN_10 - 102 or main10
                                   ENC_HEVC_MAIN10_INTRA - 103 or main10_intra             For H264, supported are auto or -1, 0 or baseline,
                                   1 or main, 2 or high, 3 or high10
                                   4 or high10_intra, Default is auto or -1
                                   ENC_H264_BASELINE - 0 or baseline.
                                   ENC_H264_MAIN - 1 or main.
                                   ENC_H264_HIGH - 2 or high.
                                   ENC_H264_HIGH_10 - 3 or high10.
                                   ENC_H264_HIGH_10_INTRA - 4 or high10_intra   -level &lt;value&gt;             Encoder level.
                                   For HEVC, supported are 10 to 52,
                                   default is 50.
                                   For H264, supported are 10 to 52,
                                   default is 50.
        -slices &lt;value&gt;            Number of slices per frame. Supported
                                   are 1 to 68, default is 1.
        -qp_mode &lt;qp&gt;              QP Mode. Supported values 0, 1 and 2
                                   default is 0.
        -control_rate &lt;rc_mode&gt;    Rate Control. Supported values -1 to 3
                                   default is -1.
        -aspect_ratio &lt;value&gt;      Aspect ratio. Supported values are 0
                                   to 3, default is 0.
        -lookahead_depth &lt;value&gt;   Lookahead depth. Supported are 0 to
                                   20, default is 0.
        -temporal_aq &lt;0/1&gt;         Temporal AQ. Enable/Disable,
                                   default is -1.
        -spatial_aq &lt;0/1&gt;          Spatial AQ. Enable/Disable,
                                   default is -1.
        -tune_metrics &lt;value&gt;      Tunes MPSoC H.264/HEVC encoder&#39;s video
                                   quality for objective metrics, default 1.
                                   Supported value from 1 to 4
        -tier &lt;value&gt;              HEVC tier, supported are -1 or auto, 0 or main,
                                   1 or high.
                                   Default is -1/auto
        -crf &lt;value&gt;               CRF supported values are 0 and 1 i.e. enable
                                   and disable
                                   Default is -1/auto
        -latency_logging           Enable latency logging
        -latency_mode &lt;value&gt;      0 normal latency (default), 1 low
                                   latency, or 2 ultra low latency      -o &lt;file&gt;                  File to which output is written.
</pre></div>
</div>
</section>
<section id="sample-transcoder-commands">
<h4>Sample Transcoder Commands<a class="headerlink" href="#sample-transcoder-commands" title="Link to this heading">Â¶</a></h4>
<p>H.264 to AV1 Transcoder:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>ma35_transcoder_app -streams 1 -frames 2000 -c:v h264_ama \
-i &lt;INPUT&gt; \
-c:v av1_ama -b:v 10M  -o h264_av1_transcode.av1
</pre></div>
</div>
<p>H.264 to H264 ABR Transcoder:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>ma35_transcoder_app -streams 1 -c:v h264_ama \
-i &lt;INPUT&gt; \
-scaler_ma -num-output 4 \
-out_1_width 1280 -out_1_height 720 -out_2_width 848 -out_2_height 480 \
-out_3_width 640 -out_3_height 360 -out_4_width 288 -out_4_height 160 \
-c:v h264_ama -b:v 4000K -o abr_ladder1.264 \
-c:v h264_ama -b:v 3000K -o abr_ladder2.264 \
-c:v h264_ama -b:v 2500K -o abr_ladder3.264 \
-c:v h264_ama -b:v 1250K -o abr_ladder4.264
</pre></div>
</div>
<p>H.264 to AV1 ULL Transcode</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>ma35_transcoder_app -streams 1 -frames 2000 -c:v h264_ama \
-i &lt;INPUT&gt;\
-c:v av1_ama  -b:v 10M -lookahead_depth 0 -o h264_av1_transcode.av1
</pre></div>
</div>
</section>
</section>
</section>
</section>


           </div>
          </div>
          
				  
				  <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../gstreamer/xabrladder.html" class="btn btn-neutral float-left" title="GStreamer ABR Ladder Application" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../../specs_and_features.html" class="btn btn-neutral float-right" title="Specs and Features of the AMD AMA Video SDK" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022-2024, Advanced Micro Devices, Inc.
      <span class="lastupdated">Last updated on August 14, 2024.
      </span></p>
  </div>



										<div class="aem-Grid aem-Grid--16">
											<div class="aem-GridColumn aem-GridColumn--xxxlarge--none aem-GridColumn--xsmall--16 aem-GridColumn--offset--xsmall--0 aem-GridColumn--xlarge--none aem-GridColumn--xxlarge--none aem-GridColumn--default--none aem-GridColumn--offset--large--1 aem-GridColumn--xlarge--12 aem-GridColumn--offset--default--0 aem-GridColumn--xxlarge--10 aem-GridColumn--offset--xlarge--2 aem-GridColumn--offset--xxlarge--3 aem-GridColumn--offset--xxxlarge--4 aem-GridColumn--xsmall--none aem-GridColumn--large--none aem-GridColumn aem-GridColumn--large--14 aem-GridColumn--xxxlarge--8 aem-GridColumn--default--16">
												<div class="container-fluid sub-footer">

													                    <div class="row">
                        <div class="col-xs-24">
                          <p><a target="_blank" href="https://www.amd.com/en/corporate/copyright">Terms and Conditions</a> | <a target="_blank" href="https://www.amd.com/en/corporate/privacy">Privacy</a> | <a target="_blank" href="https://www.amd.com/en/corporate/cookies">Cookie Policy</a> | <a target="_blank" href="https://www.amd.com/en/corporate/trademarks">Trademarks</a> | <a target="_blank" href="https://www.amd.com/system/files/documents/statement-human-trafficking-forced-labor.pdf">Statement on Forced Labor</a> | <a target="_blank" href="https://www.amd.com/en/corporate/competition">Fair and Open Competition</a> | <a target="_blank" href="https://www.amd.com/system/files/documents/amd-uk-tax-strategy.pdf">UK Tax Strategy</a> | <a target="_blank" href="https://docs.xilinx.com/v/u/9x6YvZKuWyhJId7y7RQQKA">Inclusive Terminology</a> | <a href="#cookiessettings" class="ot-sdk-show-settings">Cookies Settings</a></p>
                        </div>
                    </div>
												</div>
											</div>
										</div>
										
</br>


  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
 <script type="text/javascript">
    $(document).ready(function() {
        $(".toggle > *").hide();
        $(".toggle .header").show();
        $(".toggle .header").click(function() {
            $(this).parent().children().not(".header").toggle(400);
            $(this).parent().children(".header").toggleClass("open");
        })
    });
</script>


</body>
</html>