<!DOCTYPE html>
<html class="writer-html5" lang="English" >
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
<!-- OneTrust Cookies Consent Notice start for amd.github.io -->
<script src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js" data-document-language="true" type="text/javascript" charset="UTF-8" data-domain-script="cb638ba1-8bc4-44a0-9338-632d4dc19be6" ></script>
<script type="text/javascript">
function OptanonWrapper() { }
</script>
<!-- OneTrust Cookies Consent Notice end for amd.github.io -->
<!-- Google Tag Manager -->
<script type="text/plain" class="optanon-category-C0002">(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-5RHQV7');</script>
<!-- End Google Tag Manager -->
  <title>GStreamer Introductory Tutorials &mdash; AMD AMA 1.2.1 documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/_static/custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../_static/documentation_options.js?v=e6179555"></script>
        <script src="../../_static/doctools.js?v=888ff710"></script>
        <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../../_static/design-tabs.js?v=36754332"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="GStreamer Examples using Software Filters" href="filters.html" />
    <link rel="prev" title="FFmpeg Examples using Software Filters" href="../ffmpeg/filters.html" /> 
</head>

<body class="wy-body-for-nav">

<!-- Google Tag Manager -->
<noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5RHQV7" height="0" width="0" style="display:none;visibility:hidden" class="optanon-category-C0002"></iframe></noscript>
<!-- End Google Tag Manager --> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
            <a href="../../index.html" class="icon icon-home"> AMD AMA
          </a>
              <div class="version">
                1.2.1
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Get Started</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../release_notes.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started_on_prem.html">Hardware Setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../virtualization.html">Virtualization</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../examples.html">Tutorials and Examples</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../ffmpeg/tutorials.html">FFmpeg Introductory Tutorials</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ffmpeg/quality_analysis.html">FFmpeg Video Quality</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ffmpeg/filters.html">FFmpeg Software Filters</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Gstreamer Introductory Tutorials</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#device-selection">Device Selection</a></li>
<li class="toctree-l3"><a class="reference internal" href="#environment-setup">Environment Setup</a></li>
<li class="toctree-l3"><a class="reference internal" href="#simple-gstreamer-examples">Simple GStreamer Examples</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#decode-only">Decode only</a></li>
<li class="toctree-l4"><a class="reference internal" href="#downscaling-in-decoder">Downscaling in decoder</a></li>
<li class="toctree-l4"><a class="reference internal" href="#encode-only">Encode only</a></li>
<li class="toctree-l4"><a class="reference internal" href="#transcode-with-multiple-resolution-outputs">Transcode with Multiple-Resolution outputs</a></li>
<li class="toctree-l4"><a class="reference internal" href="#multidevice-transcode">Multidevice Transcode</a></li>
<li class="toctree-l4"><a class="reference internal" href="#d-filters">2D Filters</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="filters.html">Gstreamer Software Filters</a></li>
<li class="toctree-l2"><a class="reference internal" href="xcompositor.html">Gstreamer Compositor</a></li>
<li class="toctree-l2"><a class="reference internal" href="xabrladder.html">Gstreamer ABR Ladder</a></li>
<li class="toctree-l2"><a class="reference internal" href="../xma/xma_apps.html">XMA C-Based Applications</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../git_hub.html">AMA Repository</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Reference Guides</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../specs_and_features.html">Specs and Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../package_feed.html">Package Feed Setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../using_ffmpeg.html">Using FFmpeg</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../using_gstreamer.html">Using Gstreamer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../unified_logging.html">Unified Logging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tuning_video_quality.html">Tuning Video Quality</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tuning_pipeline_latency.html">Tuning Latency of Transcode Pipeline</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../managing_compute_resources.html">Managing Compute Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../c_apis.html">C API Programming Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../card_management.html">Card Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../migration.html">Migration Path</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../encoder_comp_matrix.html">Encoding Compatibility Matrix</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../preview.html">New Feature Preview</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Support</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../troubleshooting.html">Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference external" href="https://www.xilinx.com/support.html">File an issue</a></li>
<li class="toctree-l1"><a class="reference external" href="https://support.xilinx.com/s/topic/0TO2E000000YKY8WAO/video?language=en_US">Video Forum</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Other AMA SDK Versions</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://amd.github.io/ama-sdk/v1.2/index.html">   v1.2</a></li>
<li class="toctree-l1"><a class="reference external" href="https://amd.github.io/ama-sdk/v1.1.2/index.html">   v1.1.2</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Other Video Products</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/video-sdk/v3.0/index.html">U30</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: black" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">AMD AMA</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../../examples.html">Tutorials and Examples</a> &raquo;</li>
      <li>GStreamer Introductory Tutorials</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="gstreamer-introductory-tutorials">
<span id="gstreamer-tutorials"></span><h1>GStreamer Introductory Tutorials<a class="headerlink" href="#gstreamer-introductory-tutorials" title="Link to this heading">¶</a></h1>
<p>This page provides tutorials on how to use GStreamer with the AMD AMA Video SDK. The complete reference guide for the GStreamer version included in the AMD AMA Video SDK can be found <a class="reference internal" href="../../using_gstreamer.html"><span class="doc">here</span></a>.</p>
<nav class="contents local" id="table-of-contents">
<p class="topic-title">Table of Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#device-selection" id="id1">Device Selection</a></p></li>
<li><p><a class="reference internal" href="#environment-setup" id="id2">Environment Setup</a></p></li>
<li><p><a class="reference internal" href="#simple-gstreamer-examples" id="id3">Simple GStreamer Examples</a></p>
<ul>
<li><p><a class="reference internal" href="#decode-only" id="id4">Decode only</a></p></li>
<li><p><a class="reference internal" href="#downscaling-in-decoder" id="id5">Downscaling in decoder</a></p></li>
<li><p><a class="reference internal" href="#encode-only" id="id6">Encode only</a></p></li>
<li><p><a class="reference internal" href="#transcode-with-multiple-resolution-outputs" id="id7">Transcode with Multiple-Resolution outputs</a></p></li>
<li><p><a class="reference internal" href="#multidevice-transcode" id="id8">Multidevice Transcode</a></p></li>
<li><p><a class="reference internal" href="#d-filters" id="id9">2D Filters</a></p></li>
</ul>
</li>
</ul>
</nav>
<section id="device-selection">
<h2><a class="toc-backref" href="#id1" role="doc-backlink">Device Selection</a><a class="headerlink" href="#device-selection" title="Link to this heading">¶</a></h2>
<p>As noted in <a class="reference internal" href="../../specs_and_features.html#video-codec-unit"><span class="std std-ref">Video Codec Unit</span></a> section, each card is made of 2 devices, and by default all processing tasks are delegated to the first device in the systems. (See <a class="reference internal" href="../../card_management.html#examining-cards"><span class="std std-ref">mautil</span></a> to find out how many devices are available, in a runtime environment.) To override this behavior, default and non-default devices must be set, explicitly. See <a class="reference internal" href="../../using_gstreamer.html#gst-multiple-devices"><span class="std std-ref">Working with Multiple Devices</span></a> for more explanation, and <a class="reference internal" href="#gst-multidevice"><span class="std std-ref">Multidevice Transcode</span></a> for sample usage.</p>
</section>
<section id="environment-setup">
<h2><a class="toc-backref" href="#id2" role="doc-backlink">Environment Setup</a><a class="headerlink" href="#environment-setup" title="Link to this heading">¶</a></h2>
<ol class="arabic">
<li><p>The AMD AMA Video SDK version of FFmpeg, Gstreamer and XMA applications can be found in the /opt/amd/ama/ma35/bin folder of your system. If this folder is not present, install the required packages:</p>
<p>See <a class="reference internal" href="../../getting_started_on_prem.html"><span class="doc">On Premises</span></a></p>
</li>
<li><p>Configure the environment to use the AMD AMA Video SDK. This a mandatory step for all applications:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>source /opt/amd/ama/ma35/scripts/setup.sh
</pre></div>
</div>
</li>
</ol>
<p>The setup script exports important environment variables and ensures proper execution environment for AMD AMA Video SDK.</p>
<p>Sourcing the setup script should be performed each time you open a new terminal on your system. This is required for the environment to be correctly configured.</p>
</section>
<section id="simple-gstreamer-examples">
<h2><a class="toc-backref" href="#id3" role="doc-backlink">Simple GStreamer Examples</a><a class="headerlink" href="#simple-gstreamer-examples" title="Link to this heading">¶</a></h2>
<p>By default, all the example scripts use the filesink plug-in and write the output files into the /tmp directory.</p>
<p>Some of the examples read or write RAW files from disk (encode-only or decode-only pipelines). There is a chance that due to the massive bandwidth required for operating on these RAW files, you will notice a drop in FPS; this is not due to the AMD AMA Video SDK but the disk speeds. We recommend reading/writing from <code class="docutils literal notranslate"><span class="pre">/dev/shm</span></code> which is a RAM disk.</p>
<p>Most of the scripts allow to use the fakesink plug-in which only displays performance numbers and will not write outputs to disk. This is done by setting the “fakesink” argument to 1.</p>
<p>Each script contains error checks before passing arguments to GStreamer pipeline command to help users avoid giving incorrect arguments.</p>
<p>Most of the example scripts included in this directory take H.264 input streams. To use H.265 input streams, update the scripts to use the <code class="docutils literal notranslate"><span class="pre">h265parse</span></code> GStreamer plug-in instead of <code class="docutils literal notranslate"><span class="pre">h264parse</span></code>.</p>
<p>For brevity purposes, explanations of the GStreamer element properties are not repeated after they have been explained once. The detailed explanation of the each GStreamer pipeline element property can be obtained by using <code class="docutils literal notranslate"><span class="pre">gst-inspect-1.0</span> <span class="pre">&lt;element</span> <span class="pre">name&gt;</span></code> (e.g. <code class="docutils literal notranslate"><span class="pre">gst-inspect-1.0</span> <span class="pre">ama_av1enc</span></code>).</p>
<section id="decode-only">
<span id="gstreamer-decode-only"></span><h3><a class="toc-backref" href="#id4" role="doc-backlink">Decode only</a><a class="headerlink" href="#decode-only" title="Link to this heading">¶</a></h3>
<p><strong>Command Line</strong>:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>gst-launch-1.0 filesrc location=&lt;INPUT&gt; ! parsebin ! h264parse ! ama_h264dec ! capsfilter &#39;caps=video/x-raw(memory:AMAMemory),format=NV12,width=&lt;WIDTH&gt;,height=&lt;HEIGHT&gt;&#39; !  ama_download ! filesink location=&lt;OUTPUT&gt;
</pre></div>
</div>
<p>Explanation of the pipeline elements and their properties:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">gst-launch-1.0</span></code></p>
<ul>
<li><p>The GStreamer application, which is provided by AMD, and moved to the top of the PATH when you sourced the setup.sh script</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">filesrc</span> <span class="pre">location</span></code></p>
<ul>
<li><p>Location of the file h.264 to read</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">parsebin</span></code></p>
<ul>
<li><p>Unpacks the container to elementary stream</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">h264parse</span></code></p>
<ul>
<li><p>Parses H.264 streams</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">ama_h264dec</span></code></p>
<ul>
<li><p>GStreamer plug-in that provides functionality to decode H.264 encoded streams. This plug-in accepts input encoded stream in byte-stream/NALU format only and produces NV12 frames.</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">capsfilter</span></code></p>
<ul>
<li><p>Specifies the capabilities of the streams. Note that keyword <code class="docutils literal notranslate"><span class="pre">capsfilter</span></code> is optional.</p></li>
</ul>
</li>
</ul>
<p>In the above cli, <code class="docutils literal notranslate"><span class="pre">&lt;WIDTH&gt;</span></code> and <code class="docutils literal notranslate"><span class="pre">&lt;HEIGHT&gt;</span></code> are optional parameters that describe the desired resolution of the decoded stream. It should be noted that resizing is done on the decoder and as such does not impose any cost on the host CPU or the accelerated scaler <a class="reference internal" href="../../using_gstreamer.html#gst-scaler-plugin"><span class="std std-ref">Scaler Plugin</span></a>.</p>
</section>
<section id="downscaling-in-decoder">
<h3><a class="toc-backref" href="#id5" role="doc-backlink">Downscaling in decoder</a><a class="headerlink" href="#downscaling-in-decoder" title="Link to this heading">¶</a></h3>
<p><strong>Command Line</strong>:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>gst-launch-1.0 filesrc location=&lt;INPUT&gt; ! parsebin ! h264parse ! ama_h264dec allow-downscaling=true ! capsfilter &#39;caps=video/x-raw(memory:AMAMemory),format=NV12,width=&lt;WIDTH&gt;,height=&lt;HEIGHT&gt;&#39; !  ama_download ! filesink location=&lt;OUTPUT&gt;
</pre></div>
</div>
<p>Explanation of the pipeline elements and their properties:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">allow-downscaling</span></code></p>
<ul>
<li><p>Option to inform the downstream capfilter that downscaling will be performed though decoder.</p></li>
</ul>
</li>
</ul>
</section>
<section id="encode-only">
<span id="gstreamer-encode-only"></span><h3><a class="toc-backref" href="#id6" role="doc-backlink">Encode only</a><a class="headerlink" href="#encode-only" title="Link to this heading">¶</a></h3>
<p><strong>Command Line</strong>:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>gst-launch-1.0 filesrc location=&lt;INPUT&gt; ! rawvideoparse width=1920 height=1080 format=i420 framerate=60/1 ! ama_upload ! ama_h264enc bitrate=6000000 ! h264parse ! filesink location=/tmp/out.h264
</pre></div>
</div>
<p>Explanation of the pipeline elements and their properties:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">ama_h264enc</span></code></p>
<ul>
<li><p>GStreamer plug-in that provides functionality to encode raw bit streams into AVC byte-stream.</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">rawvideoparse</span></code></p>
<ul>
<li><p>This element converts unformatted data streams into timestamped raw video frames, with specified resolution, frame rate and pixel format.</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">ama_upload</span></code></p>
<ul>
<li><p>This plugin transfer raw video file content from host to the device</p></li>
</ul>
</li>
</ul>
</section>
<section id="transcode-with-multiple-resolution-outputs">
<span id="gstreamer-transcode-and-scale"></span><h3><a class="toc-backref" href="#id7" role="doc-backlink">Transcode with Multiple-Resolution outputs</a><a class="headerlink" href="#transcode-with-multiple-resolution-outputs" title="Link to this heading">¶</a></h3>
<p><strong>Command Line</strong>:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>gst-launch-1.0 filesrc location=&lt;INPUT&gt; ! parsebin ! \
h264parse ! ama_h264dec ! identity eos-after=1200 ! ama_scaler name=s \
s.src_0 ! &#39;video/x-raw(memory:AMAMemory),width=1920,height=1080&#39; ! ama_h265enc bitrate=6000000 ! queue ! filesink location=/tmp/hevc_1080p.hevc \
s.src_1 ! &#39;video/x-raw(memory:AMAMemory),width=1280,height=720&#39; ! ama_av1enc bitrate=2000000 ! queue ! filesink location=/tmp/av1_720p.av1 \
s.src_2 ! &#39;video/x-raw(memory:AMAMemory),width=720,height=480&#39; ! ama_h264enc bitrate=1000000 ! queue ! filesink location=/tmp/h264_480p.h264 \
s.src_3 ! &#39;video/x-raw(memory:AMAMemory),width=360,height=240&#39; ! ama_av1enc bitrate=1000000 ! queue ! filesink location=/tmp/av1_240p.av1
</pre></div>
</div>
<p>Explanation of the pipeline elements and their properties:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">queue</span></code></p>
<blockquote>
<div><ul class="simple">
<li><p>The queue will create a new thread on the source pad to decouple the processing on sink and source pad.</p></li>
</ul>
</div></blockquote>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">identity</span></code></p>
<blockquote>
<div><ul class="simple">
<li><p>In this usage, forces the insertion of EOS after 1200 buffers.</p></li>
</ul>
</div></blockquote>
</li>
</ul>
<p>For more comprehensive sets of examples refer to <code class="docutils literal notranslate"><span class="pre">/opt/amd/ama/ma35/examples/gstreamer/ama_pipeline_scripts/tutorials</span></code> folder.</p>
</section>
<section id="multidevice-transcode">
<span id="gst-multidevice"></span><h3><a class="toc-backref" href="#id8" role="doc-backlink">Multidevice Transcode</a><a class="headerlink" href="#multidevice-transcode" title="Link to this heading">¶</a></h3>
<p>This example demonstrates <a class="reference internal" href="../../using_gstreamer.html#gst-dma-plugins"><span class="std std-ref">AMA SDK's DMA plugins</span></a> capabilities to execute any of transcode operations, on a given device.</p>
<p><strong>Command Line</strong>:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>gst-launch-1.0 filesrc location=&lt;INPUT&gt; ! qtdemux ! h264parse ! ama_h264dec device=X ! &quot;video/x-raw(memory:AMAMemory),format=I420&quot; ! ama_download ! ama_upload device=Y ! ama_h264enc  bitrate=6000000 ! h264parse ! mp4mux ! filesink location=&lt;OUTPUT&gt;
</pre></div>
</div>
<p>, where <code class="docutils literal notranslate"><span class="pre">X</span></code> and <code class="docutils literal notranslate"><span class="pre">Y</span></code> are device indices for decode and encode operations, respectively.</p>
</section>
<section id="d-filters">
<h3><a class="toc-backref" href="#id9" role="doc-backlink">2D Filters</a><a class="headerlink" href="#d-filters" title="Link to this heading">¶</a></h3>
<p>This following examples demonstrate <a class="reference internal" href="../../using_gstreamer.html#gst-2d-plugin"><span class="std std-ref">AMA SDK's 2D plugins</span></a> capabilities.</p>
<p><strong>Subsampling</strong>:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>gst-launch-1.0 -v \
  filesrc location=&lt;4:2:2 YUV&gt; ! rawvideoparse format=uyvy width=1920 height=1080 framerate=30/1 \
    ! ama_upload ! ama_videoconvert ! ama_download ! video/x-raw,format=I420 ! filesink location=&lt;4:2:0 YUV&gt;
</pre></div>
</div>
<p><strong>Color space conversion</strong>:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>gst-launch-1.0 -v \
 filesrc location=&lt;4:2:0 YUV&gt; ! rawvideoparse format=i420 width=1920 height=1080 framerate=24/1 \
 ! ama_upload ! ama_videoconvert ! ama_download ! video/x-raw,format=BGRA ! filesink location=&lt;RGB&gt;
</pre></div>
</div>
<p><strong>Rotate</strong>:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>gst-launch-1.0 -v videotestsrc num-buffers=300 ! video/x-raw,format=I420 ! ama_upload ! ama_rotate angle=rotate-90 !  ama_h264enc bitrate=1000000 ! filesink location=rotate.h264
</pre></div>
</div>
<p><strong>Padding</strong>:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>gst-launch-1.0 -v filesrc location=&lt;4:2:0 YUV&gt; ! rawvideoparse format=i420 width=1920 height=1080 framerate=24/1 ! \
 ama_upload ! ama_videopad top=150 right=30 left=30 bottom=10 color=0x00FFAA00 ! ama_h264enc bitrate=1000000 ! filesink location=pad.h264
</pre></div>
</div>
<p><strong>Crop</strong>:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>gst-launch-1.0 -v filesrc location=&lt;4:2:0 YUV&gt; ! rawvideoparse format=i420 width=1920 height=1080 framerate=24/1 ! \
 ama_upload ! ama_videocrop top=150 right=30 left=30 bottom=10 ! ama_h264enc bitrate=1000000 ! filesink location=pad.h264
</pre></div>
</div>
<p><strong>Tile</strong>:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>gst-launch-1.0 -v \
 ama_tile name=tile grid_x=2 grid_y=2 \
 ! &#39;video/x-raw(memory:AMAMemory)&#39; ! ama_h264enc bitrate=1000000 ! filesink location=tile.h264 \
 filesrc location=&lt;INPUT 1&gt; ! qtdemux ! h264parse ! ama_h264dec ! tile.sink_0 \
 filesrc location=&lt;INPUT 2&gt; ! qtdemux ! h264parse ! ama_h264dec ! tile.sink_1 \
 filesrc location=&lt;INPUT 3&gt; ! qtdemux ! h264parse ! ama_h264dec ! tile.sink_2 \
 filesrc location=&lt;INPUT 4&gt; ! qtdemux ! h264parse ! ama_h264dec ! tile.sink_3
</pre></div>
</div>
<p><strong>Overlay</strong>:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>gst-launch-1.0 -v  ama_overlay name=overlay offset-x=50 offset-y=100 !  &#39;video/x-raw(memory:AMAMemory)&#39; ! ama_h264enc bitrate=1000000 ! filesink location=overlay.h264  \
 filesrc location=&lt;Background Video&gt; ! qtdemux ! h264parse ! ama_h264dec ! &#39;video/x-raw(memory:AMAMemory),format=I420&#39; ! overlay.video \
 videotestsrc pattern=checkers-8 num-buffers=300 ! video/x-raw,format=I420,framerate=60/1 ! ama_upload ! overlay.overlay
</pre></div>
</div>
<p><strong>Drawbox</strong>:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>gst-launch-1.0 -v \
 filesrc location=&lt;INPUT&gt; ! qtdemux ! h264parse ! ama_h264dec \
 ! ama_drawbox top=10 left=20 width=200 height=400 thickness=10 color=0x00FFFF00 \
 ! ama_h264enc bitrate=1000000 ! filesink location=drawbox.h264
</pre></div>
</div>
<p><strong>Composition</strong>:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>gst-launch-1.0  -v ama_compositor name=comp params-file=./dynamic_params.txt \
 sink_0::width=200 sink_0::height=100 sink_0::xpos=0 sink_0::ypos=0 sink_0::border-inner-width=2 sink_0::border-color=0x00FF0000 \
 sink_1::width=200 sink_1::height=100 sink_1::xpos=0 sink_1::ypos=108 sink_1::border-inner-width=2 sink_1::border-color=0x00FF0000 \
 ! &#39;video/x-raw(memory:AMAMemory),format=I420&#39; ! ama_h264enc bitrate=5000000 ! h264parse ! mp4mux ! filesink location=comp.mp4 \
 filesrc location=&lt;INPUT 1&gt; ! qtdemux ! h264parse ! ama_h264dec ! comp.sink_0 \
 filesrc location=&lt;INPUT 2&gt; ! qtdemux ! h264parse ! ama_h264dec ! comp.sink_1
</pre></div>
</div>
<p>, where parameter file contains:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>00:00:01.000 compositor_ama &#39;background=pink&#39;;
00:00:03.000 compositor_ama &#39;background=green:input=1:border_inner_size=4:border_outer_size=2:border_color=blue&#39;;
00:00:06.000 compositor_ama &#39;input=1:border_inner_size=4:border_outer_size=2:border_color=brown:input=0:border_inner_size=10:border_outer_size=10&#39;;
00:00:08.000 compositor_ama &#39;background=0x0000FF00&#39;;
00:00:10.000 compositor_ama &#39;input=1:flip=hv&#39;;
</pre></div>
</div>
</section>
</section>
</section>


           </div>
          </div>
          
				  
				  <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../ffmpeg/filters.html" class="btn btn-neutral float-left" title="FFmpeg Examples using Software Filters" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="filters.html" class="btn btn-neutral float-right" title="GStreamer Examples using Software Filters" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022-2024, Advanced Micro Devices, Inc.
      <span class="lastupdated">Last updated on October 24, 2024.
      </span></p>
  </div>



										<div class="aem-Grid aem-Grid--16">
											<div class="aem-GridColumn aem-GridColumn--xxxlarge--none aem-GridColumn--xsmall--16 aem-GridColumn--offset--xsmall--0 aem-GridColumn--xlarge--none aem-GridColumn--xxlarge--none aem-GridColumn--default--none aem-GridColumn--offset--large--1 aem-GridColumn--xlarge--12 aem-GridColumn--offset--default--0 aem-GridColumn--xxlarge--10 aem-GridColumn--offset--xlarge--2 aem-GridColumn--offset--xxlarge--3 aem-GridColumn--offset--xxxlarge--4 aem-GridColumn--xsmall--none aem-GridColumn--large--none aem-GridColumn aem-GridColumn--large--14 aem-GridColumn--xxxlarge--8 aem-GridColumn--default--16">
												<div class="container-fluid sub-footer">

													                    <div class="row">
                        <div class="col-xs-24">
                          <p><a target="_blank" href="https://www.amd.com/en/corporate/copyright">Terms and Conditions</a> | <a target="_blank" href="https://www.amd.com/en/corporate/privacy">Privacy</a> | <a target="_blank" href="https://www.amd.com/en/corporate/cookies">Cookie Policy</a> | <a target="_blank" href="https://www.amd.com/en/corporate/trademarks">Trademarks</a> | <a target="_blank" href="https://www.amd.com/system/files/documents/statement-human-trafficking-forced-labor.pdf">Statement on Forced Labor</a> | <a target="_blank" href="https://www.amd.com/en/corporate/competition">Fair and Open Competition</a> | <a target="_blank" href="https://www.amd.com/system/files/documents/amd-uk-tax-strategy.pdf">UK Tax Strategy</a> | <a target="_blank" href="https://docs.xilinx.com/v/u/9x6YvZKuWyhJId7y7RQQKA">Inclusive Terminology</a> | <a href="#cookiessettings" class="ot-sdk-show-settings">Cookies Settings</a></p>
                        </div>
                    </div>
												</div>
											</div>
										</div>
										
</br>


  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
 <script type="text/javascript">
    $(document).ready(function() {
        $(".toggle > *").hide();
        $(".toggle .header").show();
        $(".toggle .header").click(function() {
            $(this).parent().children().not(".header").toggle(400);
            $(this).parent().children(".header").toggleClass("open");
        })
    });
</script>


</body>
</html>